(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[996],{7350:(e,t,n)=>{var r=n(38221),l=n(23805);e.exports=function(e,t,n){var a=!0,o=!0;if("function"!=typeof e)throw TypeError("Expected a function");return l(n)&&(a="leading"in n?!!n.leading:a,o="trailing"in n?!!n.trailing:o),r(e,t,{leading:a,maxWait:t,trailing:o})}},52153:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var r=n(74848),l=n(96540),a=n(37399),o=n(31024),i=n(72748),s=n(49517),c=n(97151),d=n(65468),u=n(71468),m=n(87947),f=n(66933),x=n(84994),h=n(95258);let v=()=>{let e=(0,u.d4)(e=>e.panel.isNodePanelExpanded),t=(0,u.wA)(),n=(0,u.d4)(e=>e.flow.nodes),v=(0,u.d4)(e=>e.nodeTypes.data),p=(0,m.VH)(),[g,w]=(0,l.useState)(""),[y,k]=(0,l.useState)(new Set),[b,j]=(0,l.useState)({}),N=(0,l.useRef)(null),C=(0,l.useRef)(null),[E,_]=(0,l.useState)(-1);(0,f.vC)("mod+k",n=>{if(n.preventDefault(),e&&document.activeElement===N.current){var r;null===(r=N.current)||void 0===r||r.blur()}t((0,x.iv)(!e))},{enableOnFormTags:!0},[e]),(0,f.vC)("esc",()=>{var n;e&&(null===(n=C.current)||void 0===n?void 0:n.contains(document.activeElement))&&t((0,x.iv)(!1))},{enableOnFormTags:!0},[e]),(0,l.useEffect)(()=>{let t=t=>{var n;if(!e||!(null===(n=C.current)||void 0===n?void 0:n.contains(document.activeElement)))return;let r=Array.from(C.current.querySelectorAll('div[role="button"], button, [tabindex="0"]'));switch(t.key){case"ArrowDown":t.preventDefault(),_(e=>e<r.length-1?e+1:e);break;case"ArrowUp":t.preventDefault(),_(e=>e>0?e-1:e);break;case"Enter":t.preventDefault(),E>=0&&E<r.length&&r[E].click()}};return e&&window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[e,E]),(0,l.useEffect)(()=>{e||_(-1)},[e]),(0,l.useEffect)(()=>{e&&N.current&&N.current.focus()},[e]);let S=e=>{p&&((0,h.ff)(n,v,e,p,t),t((0,x.iv)(!1)))};(0,l.useEffect)(()=>{j(Object.keys(v).reduce((e,t)=>{if(0===g.trim().length)return v;let n=v[t].filter(e=>e.name.toLowerCase().includes(g.toLowerCase()));return n.length>0&&(e[t]=n,k(e=>{let n=new Set(e);return n.has(t)||n.add(t),n})),e},{}))},[v,g]);let A=e=>e.reduce((e,t)=>{let n=t.category||"Other";if(!e[n]){var r,l;e[n]={nodes:[],logo:t.logo,color:null===(r=t.visual_tag)||void 0===r?void 0:r.color,acronym:null===(l=t.visual_tag)||void 0===l?void 0:l.acronym}}return e[n].nodes.push(t),e},{});return(0,r.jsxs)("div",{ref:C,"data-node-panel":!0,"data-expanded":e,className:"".concat(e?"w-64":"w-auto h-auto"," shadow-sm rounded-xl border border-solid border-default-200 bg-background transition-width duration-300 transition-height duration-300"),children:[(0,r.jsx)(o.I,{content:(0,r.jsxs)("div",{className:"px-1 py-2",children:[(0,r.jsx)("div",{className:"text-small font-bold",children:"Keyboard Shortcuts"}),(0,r.jsxs)("div",{className:"text-tiny",children:["Press ",navigator.platform.includes("Mac")?"âŒ˜+K":"Ctrl+K"," or ",(0,r.jsx)("kbd",{children:"K"})," to toggle panel"]})]}),placement:"right",children:(0,r.jsx)(i.T,{isIconOnly:!0,size:"md",className:"bg-background",onClick:()=>{t((0,x.iv)(!e))},children:(0,r.jsx)(a.In,{icon:e?"solar:minus-square-linear":"solar:widget-add-linear",width:"80%",className:"text-default-500"})})}),e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.r,{ref:N,id:"node-search-input",type:"search",placeholder:"Search nodes...",value:g,onChange:e=>w(e.target.value),fullWidth:!0,className:"px-2 rounded",startContent:(0,r.jsx)(a.In,{icon:"akar-icons:search",className:"text-default-500"})}),(0,r.jsx)("div",{className:"mt-4 max-h-[calc(100vh-16rem)] overflow-auto",id:"node-type-accordion",children:(0,r.jsx)(c.D,{selectionMode:"multiple",selectedKeys:Array.from(y),onSelectionChange:e=>k(new Set(Array.from(e))),children:Object.keys(b).filter(e=>"Input/Output"!==e).map(e=>{let t=b[e],n=t.some(e=>e.category);return(0,r.jsx)(d.R,{title:e,textValue:e,children:n?(0,r.jsx)(c.D,{selectionMode:"multiple",children:Object.entries(A(t)).map(e=>{let[t,{nodes:n,logo:l,color:a,acronym:o}]=e;return(0,r.jsx)(d.R,{textValue:t,title:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-8 flex-shrink-0",children:l?(0,r.jsx)("img",{src:l,alt:"".concat(t," Logo"),className:"max-h-5 max-w-5"}):(0,r.jsx)("div",{className:"node-acronym-tag float-left text-white px-2 py-1 rounded-full text-xs inline-block",style:{backgroundColor:a},children:o})}),(0,r.jsx)("span",{children:t})]}),children:n.map(e=>(0,r.jsx)("div",{className:"flex items-center cursor-pointer p-2 hover:bg-default-100 ml-4",onClick:()=>S(e.name),children:(0,r.jsx)("span",{className:"flex-grow overflow-hidden text-ellipsis whitespace-nowrap text-foreground",title:e.config.title,children:e.config.title})},e.name))},t)})}):b[e].map(e=>(0,r.jsxs)("div",{className:"flex items-center cursor-pointer p-2 hover:bg-default-100",onClick:()=>S(e.name),children:[(0,r.jsx)("div",{className:"w-16 flex-shrink-0",children:e.logo?(0,r.jsx)("img",{src:e.logo,alt:"Node Logo",className:"max-h-7 max-w-7"}):(0,r.jsx)("div",{className:"node-acronym-tag float-left text-white px-2 py-1 rounded-full text-xs inline-block",style:{backgroundColor:e.visual_tag.color},children:e.visual_tag.acronym})}),(0,r.jsx)("span",{className:"flex-grow overflow-hidden text-ellipsis whitespace-nowrap text-foreground",title:e.config.title,children:e.config.title})]},e.name))},e)})})})]})]})}},38947:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(77528),l=n(55456),a=n(96540),o=n(71468),i=n(53692),s=n(29838);let c=function(){let e=(0,o.d4)(e=>e.flow.nodes),t=(0,o.d4)(e=>e.flow.edges),n=(0,a.useRef)(null),c=(0,o.wA)(),[d,u]=(0,a.useState)([]),[m,f]=(0,a.useState)([]),x=(0,a.useCallback)(()=>{let n=e.filter(e=>e.selected),r=(0,i.AX)(n,t).filter(e=>{let t=n.every(t=>t.id!==e.source),r=n.every(t=>t.id!==e.target);return!(t||r)});u(n),f(r)},[e,t]),h=(0,a.useCallback)(()=>{let n=e.filter(e=>e.selected),r=(0,i.AX)(n,t).filter(e=>{let t=n.every(t=>t.id!==e.source),r=n.every(t=>t.id!==e.target);return!(t||r)});u(n),f(r);let l=e.filter(e=>!e.selected),a=t.filter(e=>!r.includes(e));c((0,s.CU)({nodes:l})),c((0,s.jY)({edges:a}))},[e,t,c]),v=(0,a.useCallback)(()=>{if(0===d.length||n.current)return;n.current=setTimeout(()=>{n.current=null},300);let a={x:window.innerWidth/2,y:window.innerHeight/2},o=Math.min(...d.map(e=>e.position.x)),i=Math.min(...d.map(e=>e.position.y)),u=Date.now(),f=d.map(e=>{let t="".concat(e.id,"-").concat(u),n=a.x/2+(e.position.x-o),s=a.y/2+(e.position.y-i);return(0,l._)((0,r._)({},e),{id:t,position:{x:n,y:s}})}),x=m.map(e=>{let t="".concat(e.id,"-").concat(u),n="".concat(e.source,"-").concat(u),a="".concat(e.target,"-").concat(u);return(0,l._)((0,r._)({},e),{id:t,source:n,target:a})}),h=[...e.map(e=>(0,l._)((0,r._)({},e),{selected:!1})),...f],v=[...t.map(e=>(0,l._)((0,r._)({},e),{selected:!1})),...x];c((0,s.CU)({nodes:h})),c((0,s.jY)({edges:v}))},[d,m,e,t,c]),p=(0,a.useCallback)(e=>{var t;(null===(t=e.target)||void 0===t?void 0:t.closest(".react-flow"))&&((e.metaKey||e.ctrlKey)&&"c"===e.key?x():(e.metaKey||e.ctrlKey)&&"v"===e.key?v():(e.metaKey||e.ctrlKey)&&"x"===e.key&&h())},[x,v,h]);return(0,a.useEffect)(()=>(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}),[p]),(0,a.useEffect)(()=>()=>{n.current&&clearTimeout(n.current)},[]),{cut:h,copy:x,paste:v,bufferedNodes:d,bufferedEdges:m}}}}]);