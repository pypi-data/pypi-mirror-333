(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{5824:(e,t,s)=>{Promise.resolve().then(s.bind(s,3359))},3359:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(5155),n=s(2115),o=s(5688),l=s.n(o),r=s(7051),c=s.n(r);s(9324);var d=s(9584);function u(e){let{children:t}=e,[o,r]=(0,n.useState)({isAuthenticated:!1,address:null,username:null,password:null}),u=async()=>{r({isAuthenticated:!1,address:null,username:null,password:null})};return(0,n.useEffect)(()=>{localStorage.removeItem("wallet_address"),localStorage.removeItem("username"),localStorage.removeItem("auto_auth"),localStorage.removeItem("auth_token"),sessionStorage.clear(),window.ACTIVE_ACCOUNT=null,s.e(529).then(s.bind(s,849)).then(e=>{let{apiService:t}=e;t.setAuthenticated(!1),t.clearAllCache()}),fetch("/api/debug/reset",{method:"POST"}).then(e=>e.json()).then(e=>{console.log("Server state reset complete:",e)}).catch(e=>{console.error("Failed to reset server state:",e)}),console.log("Auth completely reset on application startup")},[]),(0,n.useEffect)(()=>{console.log("---- DEBUGGING PERSISTENT DATA ----"),console.log("LocalStorage keys:",Object.keys(localStorage)),console.log("SessionStorage keys:",Object.keys(sessionStorage)),indexedDB.databases().then(e=>{console.log("IndexedDB databases:",e)}),console.log("Cookies:",document.cookie)},[]),(0,a.jsx)("html",{lang:"en",children:(0,a.jsx)("body",{className:"".concat(l().variable," ").concat(c().variable," antialiased"),children:(0,a.jsx)(d.OJ,{value:o,onClearAuth:u,children:t})})})}},9584:(e,t,s)=>{"use strict";s.d(t,{Hr:()=>c,OJ:()=>r,cy:()=>o});var a=s(5155),n=s(2115);let o=(0,n.createContext)({isAuthenticated:!1,address:null,username:null,password:null,clearAuth:async()=>{},setPassword:()=>{},isCurrentAccount:()=>!1});function l(){return window.ACTIVE_ACCOUNT}function r(e){let{children:t,value:r,onClearAuth:c}=e;void 0===window.ACTIVE_ACCOUNT&&(console.log("Initializing ACTIVE_ACCOUNT to null"),window.ACTIVE_ACCOUNT=null),(0,n.useEffect)(()=>{var e;console.log("Auth state changed, updating active account:",r.address);let t=l();t&&t!==r.address&&s.e(529).then(s.bind(s,849)).then(e=>{let{apiService:s}=e;console.log("Cleaning up resources for previous account: ".concat(t)),s.clearCache(t),s.abortRequestsForAddress(t)}),e=r.address,window.ACTIVE_ACCOUNT=e},[r.address]);let d=async()=>{s.e(529).then(s.bind(s,849)).then(e=>{let{apiService:t}=e;t.clearAllCache()}),await c()},u={...r,clearAuth:d,setPassword:e=>{r.password=e},isCurrentAccount:e=>null!==e&&e===l()};return(0,a.jsx)(o.Provider,{value:u,children:t})}function c(){let e=(0,n.useContext)(o),[t]=(0,n.useState)(()=>Math.random().toString(36).substr(2,9)),s=e.address===l();return(0,n.useEffect)(()=>(console.log("[".concat(t,"] Component using address: ").concat(e.address,", active: ").concat(s)),()=>{console.log("[".concat(t,"] Component unmounting, was using: ").concat(e.address))}),[e.address,t,s]),{address:s?e.address:null,isAuthenticated:s&&e.isAuthenticated,username:s?e.username:null,isCurrentAccount:e.isCurrentAccount}}},9324:()=>{},5688:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_4d318d",variable:"__variable_4d318d"}},7051:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_ea5f4b",variable:"__variable_ea5f4b"}}},e=>{var t=t=>e(e.s=t);e.O(0,[261,441,517,358],()=>t(5824)),_N_E=e.O()}]);