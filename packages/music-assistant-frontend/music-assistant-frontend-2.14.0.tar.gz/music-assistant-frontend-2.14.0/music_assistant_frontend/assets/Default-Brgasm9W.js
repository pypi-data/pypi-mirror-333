import{B as le,L as Fa}from"./ListItem-DX1YePCJ.js";import{_ as Ya,s as ke,c as $,a as We,o as Ne,w as se,b as tt,C as Xa,u as Ye,d as gt,e as Ga,g as _e,p as ge,f as bt,h as nt,i as wt,j as Ge,t as ie,k as kt,l as Pt,m as Ct,n as ja,q as rt,r as ut,v as ma,x as A,y as Ka,z as It,A as be,B as c,D as ee,E as Za,V as je,F as Ja,T as el,G,H as at,I as He,J as Vt,K as $t,L as tl,M as al,N as Ae,O as St,P as va,Q as Y,R as C,S as d,U as v,W as S,X as me,Y as Ke,Z as g,$ as re,a0 as e,a1 as Ee,a2 as a,a3 as Me,a4 as k,a5 as U,a6 as Zt,a7 as Oe,a8 as ne,a9 as P,aa as ct,ab as I,ac as ll,ad as il,ae as ol,af as sl,ag as nl,ah as pa,ai as ya,aj as fa,ak as rl,al as ha,am as Z,an as H,ao as N,ap as Tt,aq as Xe,ar as J,as as Ze,at as vt,au as pt,av as Re,aw as ae,ax as Ve,ay as $e,az as oe,aA as ce,aB as Se,aC as ot,aD as ul,aE as dl,aF as _a,aG as cl,aH as ml,aI as ga,aJ as vl,aK as ba,aL as pl,aM as yl,aN as wa,aO as fl,aP as hl,aQ as _l,aR as gl,aS as bl,aT as wl,aU as Jt,aV as kl,aW as Pl,aX as st,aY as Cl,aZ as lt,a_ as Je,a$ as yt,b0 as Fe,b1 as Qe,b2 as Qt,b3 as ka,b4 as dt,b5 as ea,b6 as Il,b7 as Pa,b8 as Ca,b9 as Vl,ba as $l,bb as ta,bc as aa,bd as Sl,be as Be,bf as Ia,bg as mt,bh as Va,bi as Tl,bj as Ql,bk as Ml}from"./index-Cnj5GSC_.js";import{D as Bl}from"./constants-BXWEQHoz.js";import{u as Mt,m as Bt,a as El,c as Al,b as Ll}from"./layout-BKwEErqq.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as De}from"./MediaItemThumb-nl-JfHWK.js";import{T as zl,V as ft}from"./Toolbar-DxStkeCe.js";import{V as $a}from"./VDialog-Dv-LdC8c.js";import{V as ql,a as Rl}from"./VInfiniteScroll-D66OEY1T.js";import{V as Dl,a as Te,m as Wl,b as Ol}from"./VBtn-BSF6Iwig.js";import{V as Sa}from"./VSlider-S7-5KruZ.js";import{M as ye,a as ht}from"./marquee_text_sync-CERMkGbh.js";import{V as Nl}from"./VToolbar-CdqhLlRP.js";import{V as Hl}from"./VVirtualScroll-LMBSx8GT.js";import{V as Ul}from"./VCheckbox-fyxRs1hM.js";import{V as xl,a as la,b as ia,c as oa}from"./VExpansionPanels-DibyEc0u.js";import"./VCheckboxBtn-DBChwn76.js";const Fl=de(Ya,[["__scopeId","data-v-db81c031"]]),Yl=""+new URL("icon-BQHr-CTb.png",import.meta.url).href;function Xl(t){let{rootEl:i,isSticky:s,layoutItemStyles:o}=t;const n=ke(!1),l=ke(0),r=$(()=>{const f=typeof n.value=="boolean"?"top":n.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,n.value?{[f]:We(l.value)}:{top:o.value.top}]});Ne(()=>{se(s,f=>{f?window.addEventListener("scroll",u,{passive:!0}):window.removeEventListener("scroll",u)},{immediate:!0})}),tt(()=>{window.removeEventListener("scroll",u)});let y=0;function u(){const f=y>window.scrollY?"up":"down",m=i.value.getBoundingClientRect(),h=parseFloat(o.value.top??0),p=window.scrollY-Math.max(0,l.value-h),_=m.height+Math.max(l.value,h)-window.scrollY-window.innerHeight,w=parseFloat(getComputedStyle(i.value).getPropertyValue("--v-body-scroll-y"))||0;m.height<window.innerHeight-h?(n.value="top",l.value=h):f==="up"&&n.value==="bottom"||f==="down"&&n.value==="top"?(l.value=window.scrollY+m.top-w,n.value=!0):f==="down"&&_<=0?(l.value=0,n.value="bottom"):f==="up"&&p<=0&&(w?n.value!=="top"&&(l.value=-p+w+h,n.value="top"):(l.value=m.top+p,n.value="top")),y=window.scrollY}return{isStuck:n,stickyStyles:r}}const Gl=100,jl=20;function sa(t){return(t<0?-1:1)*Math.sqrt(Math.abs(t))*1.41421356237}function na(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let i=0;for(let s=t.length-1;s>0;s--){if(t[s].t===t[s-1].t)continue;const o=sa(i),n=(t[s].d-t[s-1].d)/(t[s].t-t[s-1].t);i+=(n-o)*Math.abs(n),s===t.length-1&&(i*=.5)}return sa(i)*1e3}function Kl(){const t={};function i(n){Array.from(n.changedTouches).forEach(l=>{(t[l.identifier]??(t[l.identifier]=new Xa(jl))).push([n.timeStamp,l])})}function s(n){Array.from(n.changedTouches).forEach(l=>{delete t[l.identifier]})}function o(n){var f;const l=(f=t[n])==null?void 0:f.values().reverse();if(!l)throw new Error(`No samples for touch id ${n}`);const r=l[0],y=[],u=[];for(const m of l){if(r[0]-m[0]>Gl)break;y.push({t:m[0],d:m[1].clientX}),u.push({t:m[0],d:m[1].clientY})}return{x:na(y),y:na(u),get direction(){const{x:m,y:h}=this,[p,_]=[Math.abs(m),Math.abs(h)];return p>_&&m>=0?"right":p>_&&m<=0?"left":_>p&&h>=0?"down":_>p&&h<=0?"up":Zl()}}}return{addMovement:i,endTouch:s,getVelocity:o}}function Zl(){throw new Error}function Jl(t){let{el:i,isActive:s,isTemporary:o,width:n,touchless:l,position:r}=t;Ne(()=>{window.addEventListener("touchstart",D,{passive:!0}),window.addEventListener("touchmove",F,{passive:!1}),window.addEventListener("touchend",z,{passive:!0})}),tt(()=>{window.removeEventListener("touchstart",D),window.removeEventListener("touchmove",F),window.removeEventListener("touchend",z)});const y=$(()=>["left","right"].includes(r.value)),{addMovement:u,endTouch:f,getVelocity:m}=Kl();let h=!1;const p=ke(!1),_=ke(0),w=ke(0);let Q;function L(M,B){return(r.value==="left"?M:r.value==="right"?document.documentElement.clientWidth-M:r.value==="top"?M:r.value==="bottom"?document.documentElement.clientHeight-M:qe())-(B?n.value:0)}function E(M){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const q=r.value==="left"?(M-w.value)/n.value:r.value==="right"?(document.documentElement.clientWidth-M-w.value)/n.value:r.value==="top"?(M-w.value)/n.value:r.value==="bottom"?(document.documentElement.clientHeight-M-w.value)/n.value:qe();return B?Math.max(0,Math.min(1,q)):q}function D(M){if(l.value)return;const B=M.changedTouches[0].clientX,q=M.changedTouches[0].clientY,O=25,V=r.value==="left"?B<O:r.value==="right"?B>document.documentElement.clientWidth-O:r.value==="top"?q<O:r.value==="bottom"?q>document.documentElement.clientHeight-O:qe(),b=s.value&&(r.value==="left"?B<n.value:r.value==="right"?B>document.documentElement.clientWidth-n.value:r.value==="top"?q<n.value:r.value==="bottom"?q>document.documentElement.clientHeight-n.value:qe());(V||b||s.value&&o.value)&&(Q=[B,q],w.value=L(y.value?B:q,s.value),_.value=E(y.value?B:q),h=w.value>-20&&w.value<80,f(M),u(M))}function F(M){const B=M.changedTouches[0].clientX,q=M.changedTouches[0].clientY;if(h){if(!M.cancelable){h=!1;return}const V=Math.abs(B-Q[0]),b=Math.abs(q-Q[1]);(y.value?V>b&&V>3:b>V&&b>3)?(p.value=!0,h=!1):(y.value?b:V)>3&&(h=!1)}if(!p.value)return;M.preventDefault(),u(M);const O=E(y.value?B:q,!1);_.value=Math.max(0,Math.min(1,O)),O>1?w.value=L(y.value?B:q,!0):O<0&&(w.value=L(y.value?B:q,!1))}function z(M){if(h=!1,!p.value)return;u(M),p.value=!1;const B=m(M.changedTouches[0].identifier),q=Math.abs(B.x),O=Math.abs(B.y);(y.value?q>O&&q>400:O>q&&O>3)?s.value=B.direction===({left:"right",right:"left",top:"down",bottom:"up"}[r.value]||qe()):s.value=_.value>.5}const W=$(()=>p.value?{transform:r.value==="left"?`translateX(calc(-100% + ${_.value*n.value}px))`:r.value==="right"?`translateX(calc(100% - ${_.value*n.value}px))`:r.value==="top"?`translateY(calc(-100% + ${_.value*n.value}px))`:r.value==="bottom"?`translateY(calc(100% - ${_.value*n.value}px))`:qe(),transition:"none"}:void 0);return Ye(p,()=>{var q,O;const M=((q=i.value)==null?void 0:q.style.transform)??null,B=((O=i.value)==null?void 0:O.style.transition)??null;gt(()=>{var V,b,R,x;(b=i.value)==null||b.style.setProperty("transform",((V=W.value)==null?void 0:V.transform)||"none"),(x=i.value)==null||x.style.setProperty("transition",((R=W.value)==null?void 0:R.transition)||null)}),Ga(()=>{var V,b;(V=i.value)==null||V.style.setProperty("transform",M),(b=i.value)==null||b.style.setProperty("transition",B)})}),{isDragging:p,dragProgress:_,dragStyles:W}}function qe(){throw new Error}const ei=["start","end","left","right","top","bottom"],ti=ge({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>ei.includes(t)},sticky:Boolean,...St(),...Ae(),...al(),...tl({mobile:null}),...$t(),...Bt(),...Vt(),...He({tag:"nav"}),...at()},"VNavigationDrawer"),Ta=_e()({name:"VNavigationDrawer",props:ti(),emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,i){let{attrs:s,emit:o,slots:n}=i;const{isRtl:l}=bt(),{themeClasses:r}=nt(t),{borderClasses:y}=wt(t),{backgroundColorClasses:u,backgroundColorStyles:f}=Ge(ie(t,"color")),{elevationClasses:m}=kt(t),{displayClasses:h,mobile:p}=Pt(t),{roundedClasses:_}=Ct(t),w=ja(),Q=rt(t,"modelValue",null,X=>!!X),{ssrBootStyles:L}=ut(),{scopeId:E}=ma(),D=A(),F=ke(!1),{runOpenDelay:z,runCloseDelay:W}=Za(t,X=>{F.value=X}),M=$(()=>t.rail&&t.expandOnHover&&F.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),B=$(()=>Ka(t.location,l.value)),q=$(()=>t.persistent),O=$(()=>!t.permanent&&(p.value||t.temporary)),V=$(()=>t.sticky&&!O.value&&B.value!=="bottom");Ye(()=>t.expandOnHover&&t.rail!=null,()=>{se(F,X=>o("update:rail",!X))}),Ye(()=>!t.disableResizeWatcher,()=>{se(O,X=>!t.permanent&&va(()=>Q.value=!X))}),Ye(()=>!t.disableRouteWatcher&&!!w,()=>{se(w.currentRoute,()=>O.value&&(Q.value=!1))}),se(()=>t.permanent,X=>{X&&(Q.value=!0)}),t.modelValue==null&&!O.value&&(Q.value=t.permanent||!p.value);const{isDragging:b,dragProgress:R}=Jl({el:D,isActive:Q,isTemporary:O,width:M,touchless:ie(t,"touchless"),position:B}),x=$(()=>{const X=O.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):M.value;return b.value?X*R.value:X}),{layoutItemStyles:te,layoutItemScrimStyles:j}=Mt({id:t.name,order:$(()=>parseInt(t.order,10)),position:B,layoutSize:x,elementSize:M,active:$(()=>Q.value||b.value),disableTransitions:$(()=>b.value),absolute:$(()=>t.absolute||V.value&&typeof ue.value!="string")}),{isStuck:ue,stickyStyles:we}=Xl({rootEl:D,isSticky:V,layoutItemStyles:te}),fe=Ge($(()=>typeof t.scrim=="string"?t.scrim:null)),he=$(()=>({...b.value?{opacity:R.value*.2,transition:"none"}:void 0,...j.value}));return It({VList:{bgColor:"transparent"}}),be(()=>{const X=n.image||t.image;return c(G,null,[c(t.tag,ee({ref:D,onMouseenter:z,onMouseleave:W,class:["v-navigation-drawer",`v-navigation-drawer--${B.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":F.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":O.value,"v-navigation-drawer--persistent":q.value,"v-navigation-drawer--active":Q.value,"v-navigation-drawer--sticky":V.value},r.value,u.value,y.value,h.value,m.value,_.value,t.class],style:[f.value,te.value,L.value,we.value,t.style]},E,s),{default:()=>{var Pe,Ue,xe;return[X&&c("div",{key:"image",class:"v-navigation-drawer__img"},[n.image?c(Ja,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:t.image}}},n.image):c(je,{key:"image-img",alt:"",cover:!0,height:"inherit",src:t.image},null)]),n.prepend&&c("div",{class:"v-navigation-drawer__prepend"},[(Pe=n.prepend)==null?void 0:Pe.call(n)]),c("div",{class:"v-navigation-drawer__content"},[(Ue=n.default)==null?void 0:Ue.call(n)]),n.append&&c("div",{class:"v-navigation-drawer__append"},[(xe=n.append)==null?void 0:xe.call(n)])]}}),c(el,{name:"fade-transition"},{default:()=>[O.value&&(b.value||Q.value)&&!!t.scrim&&c("div",ee({class:["v-navigation-drawer__scrim",fe.backgroundColorClasses.value],style:[he.value,fe.backgroundColorStyles.value],onClick:()=>{q.value||(Q.value=!1)}},E),null)]})])}),{isStuck:ue}}}),Qa=function(){const t=localStorage.getItem("frontend.settings.menu_items"),i=t?t.split(","):Bl,s=[];for(const o of i)o==="home"&&s.push({label:"home",icon:"mdi-home-outline",path:"/home",isLibraryNode:!1}),o==="search"&&s.push({label:"search",icon:"mdi-magnify",path:"/search",isLibraryNode:!1}),o==="artists"&&s.push({label:"artists",icon:"mdi-account-outline",path:"/artists",isLibraryNode:!0,hidden:a.libraryArtistsCount===0}),o==="albums"&&s.push({label:"albums",icon:"mdi-album",path:"/albums",isLibraryNode:!0,hidden:a.libraryAlbumsCount===0}),o==="tracks"&&s.push({label:"tracks",icon:"mdi-music-note",path:"/tracks",isLibraryNode:!0,hidden:a.libraryTracksCount===0}),o==="playlists"&&s.push({label:"playlists",icon:"mdi-playlist-play",path:"/playlists",isLibraryNode:!0,hidden:a.libraryPlaylistsCount===0}),o==="podcasts"&&s.push({label:"podcasts",icon:"mdi-podcast",path:"/podcasts",isLibraryNode:!0,hidden:a.libraryPodcastsCount===0}),o==="audiobooks"&&s.push({label:"audiobooks",icon:"mdi-book-play-outline",path:"/audiobooks",isLibraryNode:!0,hidden:a.libraryAudiobooksCount===0}),o==="radios"&&s.push({label:"radios",icon:"mdi-access-point",path:"/radios",isLibraryNode:!0,hidden:a.libraryRadiosCount===0}),o==="browse"&&s.push({label:"browse",icon:"mdi-folder-outline",path:"/browse",isLibraryNode:!0}),o==="settings"&&s.push({label:"settings.settings",icon:"mdi-cog-outline",path:"/settings",isLibraryNode:!0});return s},ai=Y({__name:"DrawerNavigation",setup(t){const i=A(localStorage.getItem("show_navigation_menu")==="true"),s=Qa();return se(()=>i.value,o=>{localStorage.setItem("show_navigation_menu",o.toString())}),(o,n)=>(d(),C(Ta,{app:"",rail:!i.value,width:280,permanent:""},{default:v(()=>[c(me,{style:{height:"55px"},active:!1},{prepend:v(()=>n[1]||(n[1]=[S("img",{class:"logo_icon",size:"40",src:Yl},null,-1)])),title:v(()=>n[2]||(n[2]=[S("div",{class:"logo_text"},"Music Assistant",-1)])),_:1}),c(Ke),c(Ee,{lines:"one",density:"compact",nav:""},{default:v(()=>[(d(!0),g(G,null,re(e(s).filter(l=>!l.hidden),l=>(d(),C(me,{key:l.path,nav:"",density:"compact",height:15,title:o.$t(l.label),"prepend-icon":l.icon,to:l.path},null,8,["title","prepend-icon","to"]))),128))]),_:1}),c(le,{nav:"",height:15,width:40,style:{position:"relative",float:"right",right:"10px",top:"20px"},ripple:!1,icon:i.value?"mdi-chevron-left":"mdi-chevron-right",title:o.$t("tooltip.show_menu"),onClick:n[0]||(n[0]=l=>i.value=!i.value)},null,8,["icon","title"])]),_:1},8,["rail"]))}}),li=de(ai,[["__scopeId","data-v-3b429b32"]]),ii={class:"media-thumb"},oi={style:{"margin-left":"-10px","padding-right":"5px"}},si=Y({__name:"AddToPlaylistDialog",setup(t){const i=A(!1),s=A([]),o=A([]),n=A(),l=A([]);Ne(()=>{Me.on("playlistdialog",async m=>{i.value=!0,l.value=m.items,n.value=m.parentItem,await r()}),tt(()=>{Me.off("playlistdialog")})});const r=async function(){s.value=[],o.value=[];const m=await k.getLibraryPlaylists();let h=l.value.length?l.value[0]:void 0;if(h){"provider_mappings"in h||(h=await k.getItem(h.media_type,h.item_id,h.provider));for(const p of m){if(!p.provider_mappings.filter(w=>w.available).length||!p.is_editable||n.value&&n.value.media_type===U.PLAYLIST&&p.item_id===n.value.item_id)continue;const _=k.providers[p.provider_mappings[0].provider_instance];_&&(_.domain=="builtin"||_.is_streaming_provider||h!=null&&h.provider_mappings.filter(w=>w.provider_instance==_.instance_id).length)&&s.value.push(p)}for(const p of Object.values(k.providers))p.supported_features.includes(Zt.PLAYLIST_CREATE)&&p.supported_features.includes(Zt.PLAYLIST_TRACKS_EDIT)&&(p.domain=="builtin"||p.is_streaming_provider||h!=null&&h.provider_mappings.filter(_=>_.provider_instance==p.instance_id).length)&&o.value.push(p.instance_id)}},y=async function(m){k.addPlaylistTracks(m.item_id,l.value.map(h=>h.uri)),f(),a.activeAlert={type:ll.INFO,message:ne("background_task_added"),persistent:!1}},u=async function(m){const h=prompt(ne("new_playlist_name"));if(!h)return;const p=await k.createPlaylist(h,m);y(p)},f=function(){i.value=!1};return(m,h)=>(d(),C($a,{modelValue:i.value,"onUpdate:modelValue":[h[0]||(h[0]=p=>i.value=p),h[1]||(h[1]=p=>{e(a).dialogActive=p})],fullscreen:"",transition:"dialog-bottom-transition"},{default:v(()=>[c(Oe,null,{default:v(()=>[c(zl,{icon:"mdi-playlist-plus",title:e(ne)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:f}]},null,8,["title","menu-items"]),c(Ke),h[4]||(h[4]=S("br",null,null,-1)),c(Ee,null,{default:v(()=>[(d(!0),g(G,null,re(s.value,p=>(d(),g("div",{key:p.item_id},[c(me,{onClick:_=>y(p)},{prepend:v(()=>[S("div",ii,[c(De,{item:p,size:50},null,8,["item"])])]),title:v(()=>[S("div",null,I(p.name),1)]),subtitle:v(()=>[S("div",null,I(p.owner),1)]),append:v(()=>[p.provider_mappings?(d(),C(ct,{key:0,domain:p.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):P("",!0)]),_:2},1032,["onClick"])]))),128)),h[2]||(h[2]=S("div",{style:{height:"30px"}},null,-1)),c(Ke),h[3]||(h[3]=S("div",{style:{height:"30px"}},null,-1)),(d(!0),g(G,null,re(o.value,p=>(d(),g("div",{key:p},[c(me,{onClick:_=>u(p)},{prepend:v(()=>[S("div",oi,[c(ct,{domain:e(k).providers[p].domain,size:50},null,8,["domain"])])]),title:v(()=>[S("div",null,I(e(ne)("new_playlist")),1)]),subtitle:v(()=>[S("div",null,I(e(ne)("create_playlist_on",[e(k).providers[p].name])),1)]),append:v(()=>[c(ct,{domain:e(k).providers[p].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ni=de(si,[["__scopeId","data-v-bd014719"]]),ri=ge({scrollable:Boolean,...Ae(),...ol(),...He({tag:"main"})},"VMain"),ui=_e()({name:"VMain",props:ri(),setup(t,i){let{slots:s}=i;const{dimensionStyles:o}=il(t),{mainStyles:n}=El(),{ssrBootStyles:l}=ut();return be(()=>c(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable},t.class],style:[n.value,l.value,o.value,t.style]},{default:()=>{var r,y;return[t.scrollable?c("div",{class:"v-main__scroller"},[(r=s.default)==null?void 0:r.call(s)]):(y=s.default)==null?void 0:y.call(s)]}})),{}}}),ra=Y({__name:"View",setup(t){return(i,s)=>{const o=nl("router-view");return d(),C(ui,{id:"cont",class:"overflow-y-auto",style:{height:"0px"}},{default:v(()=>{var n,l,r;return[e(a).navigationMenuStyle=="vertical"&&!e(a).frameless?(d(),C(li,{key:0})):P("",!0),c(o,null,{default:v(({Component:y})=>[(d(),C(sl(y)))]),_:1}),c(ni),c(Fl),c(ql,{"model-value":e(a).activeAlert!==void 0,color:((n=e(a).activeAlert)==null?void 0:n.type)||"grey",text:(l=e(a).activeAlert)==null?void 0:l.message,"close-on-content-click":"",position:"sticky",timeout:(r=e(a).activeAlert)!=null&&r.persistent?-1:5e3,"z-index":"999999",style:{"z-index":"999999"},"onUpdate:modelValue":s[0]||(s[0]=()=>e(a).activeAlert=void 0)},null,8,["model-value","color","text","timeout"])]}),_:1})}}}),di=ge({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:t=>!t||["horizontal","shift"].includes(t)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...St(),...Ae(),...ha(),...$t(),...Vt(),...Bt({name:"bottom-navigation"}),...He({tag:"header"}),...rl({selectedClass:"v-btn--selected"}),...at()},"VBottomNavigation"),ci=_e()({name:"VBottomNavigation",props:di(),emits:{"update:active":t=>!0,"update:modelValue":t=>!0},setup(t,i){let{slots:s}=i;const{themeClasses:o}=pa(),{borderClasses:n}=wt(t),{backgroundColorClasses:l,backgroundColorStyles:r}=Ge(ie(t,"bgColor")),{densityClasses:y}=ya(t),{elevationClasses:u}=kt(t),{roundedClasses:f}=Ct(t),{ssrBootStyles:m}=ut(),h=$(()=>Number(t.height)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0)),p=rt(t,"active",t.active),{layoutItemStyles:_}=Mt({id:t.name,order:$(()=>parseInt(t.order,10)),position:$(()=>"bottom"),layoutSize:$(()=>p.value?h.value:0),elementSize:h,active:p,absolute:ie(t,"absolute")});return fa(t,Dl),It({VBtn:{baseColor:ie(t,"baseColor"),color:ie(t,"color"),density:ie(t,"density"),stacked:$(()=>t.mode!=="horizontal"),variant:"text"}},{scoped:!0}),be(()=>c(t.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":p.value,"v-bottom-navigation--grow":t.grow,"v-bottom-navigation--shift":t.mode==="shift"},o.value,l.value,n.value,y.value,u.value,f.value,t.class],style:[r.value,_.value,{height:We(h.value)},m.value,t.style]},{default:()=>[s.default&&c("div",{class:"v-bottom-navigation__content"},[s.default()])]})),{}}}),mi={class:"menuButton"},vi={class:"menuButton"},pi={class:"menuButton"},yi=Y({__name:"BottomNavigation",props:{height:{}},setup(t){const i=Qa(),s=A(!1);return(o,n)=>(d(),C(ci,{height:o.height,grow:"",elevation:"15",style:{"border-top":"1px solid #20202035"},role:"navigation"},{default:v(()=>[e(Z)("tablet")?(d(!0),g(G,{key:0},re(e(i),l=>(d(),C(Te,{key:l.label,to:l.path,"aria-label":o.$t(l.label),tabindex:"0"},{default:v(()=>[c(H,{size:"xx-large"},{default:v(()=>[N(I(l.icon),1)]),_:2},1024),S("span",mi,I(o.$t(l.label)),1)]),_:2},1032,["to","aria-label"]))),128)):(d(),g(G,{key:1},[(d(!0),g(G,null,re(e(i).filter(l=>!l.isLibraryNode),l=>(d(),C(Te,{key:l.label,to:l.path,"aria-label":o.$t(l.label),tabindex:"0"},{default:v(()=>[c(H,{size:"xx-large"},{default:v(()=>[N(I(l.icon),1)]),_:2},1024),S("span",vi,I(o.$t(l.label)),1)]),_:2},1032,["to","aria-label"]))),128)),c(Tt,null,{activator:v(({props:l})=>[c(Te,ee(l,{"aria-haspopup":"true","aria-expanded":s.value.toString(),"aria-label":"Open library menu"}),{default:v(()=>[c(H,{size:"xx-large"},{default:v(()=>n[0]||(n[0]=[N("mdi-bookshelf")])),_:1}),S("span",pi,I(o.$t("library")),1)]),_:2},1040,["aria-expanded"])]),default:v(()=>[c(Ee,null,{default:v(()=>[(d(!0),g(G,null,re(e(i).filter(l=>l.isLibraryNode),l=>(d(),C(me,{key:l.label,title:o.$t(l.label),"prepend-icon":l.icon,to:l.path},null,8,["title","prepend-icon","to"]))),128))]),_:1})]),_:1})],64))]),_:1},8,["height"]))}}),fi=de(yi,[["__scopeId","data-v-5c8e33d1"]]),hi={style:{width:"auto"}},_i={key:0,style:{width:"100%"}},gi=["onClick"],bi={key:0,class:"time-text-row"},wi={class:"text-caption time-text-right"},ki=Y({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1},color:{default:void 0}},setup(t){const i=A(!1),s=A(!0),o=A(!1),n=A(0),l=A(0),r=$(()=>a.curQueueItem?i.value?`-${Xe(a.curQueueItem.duration-u.value)}`:`${Xe(u.value)}`:"0:00"),y=$(()=>{var w;if(!a.curQueueItem||!a.curQueueItem.duration||((w=a.curQueueItem.media_item)==null?void 0:w.media_type)==U.RADIO)return"";const _=a.curQueueItem.duration;return Xe(_)}),u=$(()=>o.value?(l.value=n.value,n.value):a.activePlayerQueue?a.activePlayerQueue.elapsed_time:0),f=$(()=>{var w,Q,L;const _={};return(L=(Q=(w=a.curQueueItem)==null?void 0:w.media_item)==null?void 0:Q.metadata)!=null&&L.chapters&&a.curQueueItem.media_item.metadata.chapters.forEach(E=>{_[E.start]=E.name}),_});se(u,_=>{o.value||(n.value=_)});const m=function(){o.value=!0},h=()=>{o.value=!1,!o.value&&a.activePlayer&&k.playerCommandSeek(a.activePlayer.player_id,Math.round(l.value))},p=function(_){var w,Q,L;if((L=(Q=(w=a.curQueueItem)==null?void 0:w.media_item)==null?void 0:Q.metadata)!=null&&L.chapters){for(const E of a.curQueueItem.media_item.metadata.chapters)if(E.start==_){k.playMedia(a.curQueueItem.media_item.uri,void 0,void 0,E.position.toString());return}}};return(_,w)=>{var Q,L;return d(),g("div",hi,[e(a).activePlayerQueue?(d(),g("div",_i,[c(Sa,{modelValue:n.value,"onUpdate:modelValue":w[0]||(w[0]=E=>n.value=E),disabled:!e(a).curQueueItem||!e(a).curQueueItem.media_item||!e(a).curQueueItem.duration||e(a).curQueueItem.media_item.media_type==e(U).RADIO||((Q=e(a).activePlayer)==null?void 0:Q.powered)==!1,style:{width:"100%"},min:0,max:(L=e(a).curQueueItem)==null?void 0:L.duration,"hide-details":"","track-size":2,"thumb-size":s.value?0:10,"show-ticks":f.value?"always":!1,ticks:f.value,"tick-size":"4",color:_.color,onTouchstart:w[1]||(w[1]=E=>s.value=!1),onTouchend:w[2]||(w[2]=E=>s.value=!0),onMouseenter:w[3]||(w[3]=E=>s.value=!1),onMouseleave:w[4]||(w[4]=E=>s.value=!0),onStart:m,onEnd:h},{"tick-label":v(({tick:E})=>[_.showLabels&&!s.value&&Object.values(f.value).length<6?(d(),g("a",{key:0,class:"text-caption",onClick:D=>p(E.value)},I(E.label),9,gi)):P("",!0)]),_:1},8,["modelValue","disabled","max","thumb-size","show-ticks","ticks","color"]),_.showLabels?(d(),g("div",bi,[S("div",{class:"text-caption time-text-left",onClick:w[5]||(w[5]=E=>i.value?i.value=!1:i.value=!0)},I(r.value),1),S("div",wi,I(y.value),1)])):P("",!0)])):P("",!0)])}}}),Ma=de(ki,[["__scopeId","data-v-5386447e"]]),Pi=Y({__name:"ResponsiveIcon",props:{width:{default:void 0},height:{default:void 0},staticWidth:{default:void 0},staticHeight:{default:void 0},maxWidth:{default:void 0},maxHeight:{default:void 0},minWidth:{default:"24px"},minHeight:{default:"24px"},icon:{default:void 0},type:{default:"icon"},color:{default:void 0},disabled:{type:Boolean},badge:{type:Boolean,default:void 0}},emits:["click"],setup(t,{emit:i}){const s=()=>{if(o.value){const l=o.value.offsetWidth,r=o.value.offsetHeight,y=Math.min(l,r);n.value.$el.style.fontSize=`${y}px`}},o=A(),n=A();return Ne(()=>{s(),window.addEventListener("resize",s)}),tt(()=>{window.removeEventListener("resize",s)}),(l,r)=>(d(),g("div",{ref_key:"responsiveIconHolder",ref:o,class:Ze([l.type=="btn"&&!l.disabled?"responsive-icon-holder-btn":"responsive-icon-holder"]),style:J({width:l.staticWidth?l.staticWidth:l.width,height:l.staticWidth?l.staticWidth:l.height,maxHeight:l.staticHeight?l.staticHeight:l.maxHeight,maxWidth:l.staticWidth?l.staticWidth:l.maxWidth,minHeight:l.staticHeight?l.staticHeight:l.minHeight,minWidth:l.staticWidth?l.staticWidth:l.minWidth}),onClick:r[0]||(r[0]=y=>l.disabled?y.preventDefault():l.$emit("click",y))},[c(ft,{"model-value":l.badge==!0,color:"error",dot:""},{default:v(()=>[l.type==="icon"?(d(),C(H,{key:0,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",color:l.color?l.color:"",icon:l.icon?l.icon:"mdi-check",width:l.staticWidth?l.staticWidth:null,height:l.staticHeight?l.staticHeight:null,disabled:l.disabled},vt({_:2},[re(l.$slots,(y,u)=>({name:u,fn:v(()=>[pt(l.$slots,u,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):l.type==="btn"?(d(),C(H,{key:1,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",style:{cursor:"pointer"},color:l.color?l.color:"",icon:l.icon?l.icon:"mdi-check",width:l.staticWidth?l.staticWidth:null,height:l.staticHeight?l.staticHeight:null,disabled:l.disabled},vt({_:2},[re(l.$slots,(y,u)=>({name:u,fn:v(()=>[pt(l.$slots,u,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):P("",!0)]),_:3},8,["model-value"])],6))}}),Le=de(Pi,[["__scopeId","data-v-2c9253ab"]]),Ba=Y({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){return(i,s)=>{var o,n;return i.isVisible&&i.playerQueue?(d(),C(Le,ee({key:0},i.icon,{disabled:!i.playerQueue.active||i.playerQueue.items==0,color:e(Re)((o=i.icon)==null?void 0:o.color,[[i.playerQueue.repeat_mode==e(ae).OFF,null],[i.playerQueue.repeat_mode==e(ae).ALL,"primary"],[i.playerQueue.repeat_mode==e(ae).ONE,"primary"]]),icon:e(Re)((n=i.icon)==null?void 0:n.icon,[[i.playerQueue.repeat_mode==e(ae).OFF,"mdi-repeat-off"],[i.playerQueue.repeat_mode==e(ae).ALL,"mdi-repeat"],[i.playerQueue.repeat_mode==e(ae).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),type:"btn",onClick:s[0]||(s[0]=l=>e(k).queueCommandRepeat(i.playerQueue.queue_id||"",e(Re)(null,[[i.playerQueue.repeat_mode==e(ae).OFF,e(ae).ONE],[i.playerQueue.repeat_mode==e(ae).ALL,e(ae).OFF],[i.playerQueue.repeat_mode==e(ae).ONE,e(ae).ALL]])))}),null,16,["disabled","color","icon"])):P("",!0)}}}),Ea=Y({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){return(i,s)=>{var o,n;return i.isVisible&&i.playerQueue?(d(),C(Le,ee({key:0},i.icon,{disabled:!i.playerQueue.active||i.playerQueue.items==0,color:e(Re)((o=i.icon)==null?void 0:o.color,[[i.playerQueue.shuffle_enabled,"primary",""]]),icon:e(Re)((n=i.icon)==null?void 0:n.icon,[[i.playerQueue.shuffle_enabled,"mdi-shuffle"],[i.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),type:"btn",onClick:s[0]||(s[0]=l=>e(k).queueCommandShuffle(i.playerQueue.queue_id,!i.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):P("",!0)}}}),Aa=Y({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(t){const i=t,s=$(()=>i.playerQueue?i.playerQueue.items>0:!1),o=$(()=>{var l;return!(!i.player||(l=i.playerQueue)!=null&&l.active||!i.player.current_media)}),n=$(()=>{var l;return((l=i.player)==null?void 0:l.state)==Ve.PLAYING?"mdi-pause":"mdi-play"});return(l,r)=>l.isVisible&&l.player?(d(),C(Le,ee({key:0},l.icon,{disabled:!s.value&&!o.value,icon:l.iconStyle?`${n.value}-${l.iconStyle}`:n.value,type:"btn",onClick:r[0]||(r[0]=y=>e(k).playerCommandPlayPause(l.player.player_id))}),null,16,["disabled","icon"])):P("",!0)}}),La=Y({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const i=t,s=$(()=>{var n,l;return!((n=i.playerQueue)!=null&&n.active)||!((l=i.playerQueue)!=null&&l.items)||!i.playerQueue.current_index?!1:i.playerQueue.current_index>0}),o=$(()=>{var n;return!i.player||(n=i.playerQueue)!=null&&n.active||!i.player.current_media?!1:i.player.supported_features.includes($e.NEXT_PREVIOUS)});return(n,l)=>n.isVisible&&n.player?(d(),C(Le,ee({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-previous-outline",type:"btn",onClick:l[0]||(l[0]=r=>e(k).playerCommandPrevious(n.player.player_id))}),null,16,["disabled"])):P("",!0)}}),za=Y({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const i=t,s=$(()=>{var n;return(n=i.playerQueue)!=null&&n.active?(i.playerQueue.current_index||0)<i.playerQueue.items-1:!1}),o=$(()=>{var n;return!i.player||(n=i.playerQueue)!=null&&n.active||!i.player.current_media?!1:i.player.supported_features.includes($e.NEXT_PREVIOUS)});return(n,l)=>n.isVisible&&n.player?(d(),C(Le,ee({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-next-outline",type:"btn",onClick:l[0]||(l[0]=r=>e(k).playerCommandNext(n.player.player_id))}),null,16,["disabled"])):P("",!0)}}),Ci={key:0,class:"player-controls"},Ii={key:0,class:"player-controls-elements"},Vi={key:1,class:"player-controls-elements"},$i={key:2},Si={key:3,class:"player-controls-elements"},Ti={key:4,class:"player-controls-elements"},ua=Y({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(t){return(i,s)=>{var o,n,l,r,y;return i.visibleComponents?(d(),g("div",Ci,[i.visibleComponents&&((o=i.visibleComponents.shuffle)!=null&&o.isVisible)?(d(),g("div",Ii,[c(Ea,{"player-queue":e(a).activePlayerQueue,class:"media-controls-item",icon:i.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):P("",!0),i.visibleComponents&&((n=i.visibleComponents.previous)!=null&&n.isVisible)?(d(),g("div",Vi,[c(La,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item",icon:i.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):P("",!0),i.visibleComponents&&((l=i.visibleComponents.play)!=null&&l.isVisible)?(d(),g("div",$i,[c(Aa,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","icon-style":i.visibleComponents.play.withCircle?"circle":"",icon:i.visibleComponents.play.icon},null,8,["player","player-queue","icon-style","icon"])])):P("",!0),i.visibleComponents&&((r=i.visibleComponents.next)!=null&&r.isVisible)?(d(),g("div",Si,[c(za,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,icon:i.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):P("",!0),i.visibleComponents&&((y=i.visibleComponents.repeat)!=null&&y.isVisible)?(d(),g("div",Ti,[c(Ba,{"player-queue":e(a).activePlayerQueue,icon:i.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):P("",!0)])):P("",!0)}}}),Qi={props:{width:String,height:String,style:String,allowWheel:Boolean},emits:["update:model-value"],setup(t,i){const s=A(!0),o=$(()=>({class:"player-volume",hideDetails:!0,trackSize:2,thumbSize:s.value?0:10,step:2,elevation:0,style:`width: ${t.width}; height:${t.height}; display: inline-grid; ${t.style}`})),n=$(()=>({...o.value,...i}));return{isThumbHidden:s,playerVolumeProps:n,onWheel:({deltaY:r})=>{if(!t.allowWheel)return;const y=n.value.step,u=i.attrs["model-value"],f=r<0?y:-y;i.emit("update:model-value",u+f)}}}};function Mi(t,i,s,o,n,l){return d(),C(Sa,ee(o.playerVolumeProps,{onTouchstart:i[0]||(i[0]=r=>o.isThumbHidden=!1),onTouchend:i[1]||(i[1]=r=>o.isThumbHidden=!0),onMouseenter:i[2]||(i[2]=r=>o.isThumbHidden=!1),onMouseleave:i[3]||(i[3]=r=>o.isThumbHidden=!0),onWheel:oe(o.onWheel,["prevent"]),onEnd:i[4]||(i[4]=r=>t.$emit("update:model-value",r))}),vt({_:2},[re(t.$slots,(r,y)=>({name:y,fn:v(()=>[pt(t.$slots,y,{},void 0,!0)])}))]),1040,["onWheel"])}const et=de(Qi,[["render",Mi],["__scopeId","data-v-af51e13c"]]),qa=Y({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const i=function(){a.showFullscreenPlayer&&a.showQueueItems?a.showQueueItems=!1:a.showFullscreenPlayer&&!a.showQueueItems?a.showQueueItems=!0:(a.showQueueItems=!0,a.showFullscreenPlayer=!0)};return(s,o)=>{var n;return s.isVisible?(d(),C(Le,ee({key:0},s.icon,{disabled:!e(a).activePlayerId||e(a).showFullscreenPlayer&&!e(a).curQueueItem&&!e(a).showQueueItems,icon:"mdi-playlist-play",color:e(Re)((n=s.icon)==null?void 0:n.color,[[e(a).showFullscreenPlayer&&e(a).showQueueItems,"primary",""]]),type:"btn",onClick:i}),null,16,["disabled","color"])):P("",!0)}}}),Ra=Y({__name:"SpeakerBtn",props:{color:{}},setup(t){return(i,s)=>(d(),C(le,{variant:"icon",ripple:!1,icon:"",onClick:s[0]||(s[0]=o=>e(a).showPlayersMenu=!0)},{default:v(()=>{var o;return[c(H,{color:i.color?i.color:"",size:24,icon:(o=e(a).activePlayer)!=null&&o.group_childs.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]}),_:1}))}}),Da=(t,i)=>{const s=[];(t==null?void 0:t.power_control)!=ce&&s.push({label:t.powered?"power_off_player":"power_on_player",labelArgs:[],action:()=>{k.playerCommandPowerToggle(t.player_id)},icon:"mdi-power"}),((t==null?void 0:t.state)=="playing"||(t==null?void 0:t.state)=="paused")&&s.push({label:"stop_playback",labelArgs:[],action:()=>{k.playerCommandStop(t.player_id)},icon:"mdi-stop"});const o=Object.values(k.players).filter(l=>l.player_id!=t.player_id&&l.available&&l.enabled&&(l.can_group_with.includes(t.provider)||l.can_group_with.includes(t.player_id))&&l.supported_features.includes($e.SET_MEMBERS)&&!l.synced_to);t.supported_features.includes($e.SET_MEMBERS)&&!t.synced_to&&t.type==Se.PLAYER&&t.group_childs.length==0&&o.length>0&&s.push({label:"sync_player_with",labelArgs:[],icon:"mdi-link-variant",subItems:o.map(l=>({label:l.display_name,labelArgs:[],action:()=>{k.playerCommandGroup(t.player_id,l.player_id)}})).sort((l,r)=>{var y;return l.label.toUpperCase()>((y=r.label)==null?void 0:y.toUpperCase())?1:-1})}),i&&s.push({label:i.shuffle_enabled?"shuffle_disable":"shuffle_enable",labelArgs:[],action:()=>{k.queueCommandShuffleToggle(i.queue_id)},icon:i.shuffle_enabled?"mdi-shuffle-disabled":"mdi-shuffle"}),i&&s.push({label:"select_repeat_mode",labelArgs:[],subItems:[{label:"repeat_mode.off",labelArgs:[],action:()=>{k.queueCommandRepeat(i.queue_id,ae.OFF)},selected:i.repeat_mode==ae.OFF},{label:"repeat_mode.all",labelArgs:[],action:()=>{k.queueCommandRepeat(i.queue_id,ae.ALL)},selected:i.repeat_mode==ae.ALL},{label:"repeat_mode.one",labelArgs:[],action:()=>{k.queueCommandRepeat(i.queue_id,ae.ONE)},selected:i.repeat_mode==ae.ONE}],icon:"mdi-repeat"}),i!=null&&i.items&&s.push({label:"transfer_queue",icon:"mdi-swap-horizontal",subItems:Object.values(k.players).filter(l=>l.player_id!=i.queue_id&&l.player_id!=t.player_id&&l.available&&l.enabled&&!l.synced_to).map(l=>({label:l.display_name,labelArgs:[],action:()=>{k.queueCommandTransfer(i.queue_id,l.player_id),a.activePlayerId=l.player_id}})).sort((l,r)=>{var y;return l.label.toUpperCase()>((y=r.label)==null?void 0:y.toUpperCase())?1:-1})}),i!=null&&i.items&&s.push({label:"queue_clear",labelArgs:[],action:()=>{k.queueCommandClear(i.queue_id)},icon:"mdi-cancel"});const n=t.source_list.filter(l=>!l.passive||l.id==t.active_source);return t.active_source!=t.player_id&&n.push({id:t.player_id,name:ne("music_assistant_source"),passive:!1,can_play_pause:!0,can_seek:!0,can_next_previous:!0}),!t.synced_to&&n.length>0&&s.push({label:"select_source",labelArgs:[],icon:"mdi-import",subItems:n.map(l=>({label:l.name,labelArgs:[],disabled:l.id==t.active_source,selected:l.id==t.active_source,action:()=>{k.playerCommandGroupSelectSource(t.player_id,l.id)}})).sort((l,r)=>{var y;return l.label.toUpperCase()>((y=r.label)==null?void 0:y.toUpperCase())?1:-1})}),i&&"dont_stop_the_music_enabled"in i&&s.push({label:i.dont_stop_the_music_enabled?"dont_stop_the_music_disable":"dont_stop_the_music_enable",labelArgs:[],action:()=>{k.queueCommandDontStopTheMusicToggle(i.queue_id)},icon:"mdi-all-inclusive"}),s.push({label:"open_player_settings",labelArgs:[],action:()=>{a.showFullscreenPlayer=!1,a.showPlayersMenu=!1,ot.push(`/settings/editplayer/${t.player_id}`)},icon:"mdi-cog-outline"}),t.type!==Se.GROUP&&s.push({label:"open_dsp_settings",labelArgs:[],action:()=>{a.showFullscreenPlayer=!1,a.showPlayersMenu=!1,ot.push(`/settings/editplayer/${t.player_id}/dsp`)},icon:"mdi-equalizer"}),s},Et=Symbol.for("vuetify:v-tabs"),Bi=ge({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},..._a(Wl({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),_t=_e()({name:"VTab",props:Bi(),setup(t,i){let{slots:s,attrs:o}=i;const{textColorClasses:n,textColorStyles:l}=ul(t,"sliderColor"),r=A(),y=A(),u=$(()=>t.direction==="horizontal"),f=$(()=>{var h,p;return((p=(h=r.value)==null?void 0:h.group)==null?void 0:p.isSelected.value)??!1});function m(h){var _,w;let{value:p}=h;if(p){const Q=(w=(_=r.value)==null?void 0:_.$el.parentElement)==null?void 0:w.querySelector(".v-tab--selected .v-tab__slider"),L=y.value;if(!Q||!L)return;const E=getComputedStyle(Q).color,D=Q.getBoundingClientRect(),F=L.getBoundingClientRect(),z=u.value?"x":"y",W=u.value?"X":"Y",M=u.value?"right":"bottom",B=u.value?"width":"height",q=D[z],O=F[z],V=q>O?D[M]-F[M]:D[z]-F[z],b=Math.sign(V)>0?u.value?"right":"bottom":Math.sign(V)<0?u.value?"left":"top":"center",x=(Math.abs(V)+(Math.sign(V)<0?D[B]:F[B]))/Math.max(D[B],F[B])||0,te=D[B]/F[B]||0,j=1.5;cl(L,{backgroundColor:[E,"currentcolor"],transform:[`translate${W}(${V}px) scale${W}(${te})`,`translate${W}(${V/j}px) scale${W}(${(x-1)/j+1})`,"none"],transformOrigin:Array(3).fill(b)},{duration:225,easing:ml})}}return be(()=>{const h=Te.filterProps(t);return c(Te,ee({symbol:Et,ref:r,class:["v-tab",t.class],style:t.style,tabindex:f.value?0:-1,role:"tab","aria-selected":String(f.value),active:!1},h,o,{block:t.fixed,maxWidth:t.fixed?300:void 0,"onGroup:selected":m}),{...s,default:()=>{var p;return c(G,null,[((p=s.default)==null?void 0:p.call(s))??t.text,!t.hideSlider&&c("div",{ref:y,class:["v-tab__slider",n.value],style:l.value},null)])}})}),dl({},r)}}),Ei=t=>{const{touchstartX:i,touchendX:s,touchstartY:o,touchendY:n}=t,l=.5,r=16;t.offsetX=s-i,t.offsetY=n-o,Math.abs(t.offsetY)<l*Math.abs(t.offsetX)&&(t.left&&s<i-r&&t.left(t),t.right&&s>i+r&&t.right(t)),Math.abs(t.offsetX)<l*Math.abs(t.offsetY)&&(t.up&&n<o-r&&t.up(t),t.down&&n>o+r&&t.down(t))};function Ai(t,i){var o;const s=t.changedTouches[0];i.touchstartX=s.clientX,i.touchstartY=s.clientY,(o=i.start)==null||o.call(i,{originalEvent:t,...i})}function Li(t,i){var o;const s=t.changedTouches[0];i.touchendX=s.clientX,i.touchendY=s.clientY,(o=i.end)==null||o.call(i,{originalEvent:t,...i}),Ei(i)}function zi(t,i){var o;const s=t.changedTouches[0];i.touchmoveX=s.clientX,i.touchmoveY=s.clientY,(o=i.move)==null||o.call(i,{originalEvent:t,...i})}function qi(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:s=>Ai(s,i),touchend:s=>Li(s,i),touchmove:s=>zi(s,i)}}function Ri(t,i){var y;const s=i.value,o=s!=null&&s.parent?t.parentElement:t,n=(s==null?void 0:s.options)??{passive:!0},l=(y=i.instance)==null?void 0:y.$.uid;if(!o||!l)return;const r=qi(i.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[l]=r,ga(r).forEach(u=>{o.addEventListener(u,r[u],n)})}function Di(t,i){var l,r;const s=(l=i.value)!=null&&l.parent?t.parentElement:t,o=(r=i.instance)==null?void 0:r.$.uid;if(!(s!=null&&s._touchHandlers)||!o)return;const n=s._touchHandlers[o];ga(n).forEach(y=>{s.removeEventListener(y,n[y])}),delete s._touchHandlers[o]}const Wa={mounted:Ri,unmounted:Di},Oa=Symbol.for("vuetify:v-window"),Na=Symbol.for("vuetify:v-window-group"),Ha=ge({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Ae(),...He(),...at()},"VWindow"),da=_e()({name:"VWindow",directives:{Touch:Wa},props:Ha(),emits:{"update:modelValue":t=>!0},setup(t,i){let{slots:s}=i;const{themeClasses:o}=nt(t),{isRtl:n}=bt(),{t:l}=vl(),r=fa(t,Na),y=A(),u=$(()=>n.value?!t.reverse:t.reverse),f=ke(!1),m=$(()=>{const z=t.direction==="vertical"?"y":"x",M=(u.value?!f.value:f.value)?"-reverse":"";return`v-window-${z}${M}-transition`}),h=ke(0),p=A(void 0),_=$(()=>r.items.value.findIndex(z=>r.selected.value.includes(z.id)));se(_,(z,W)=>{const M=r.items.value.length,B=M-1;M<=2?f.value=z<W:z===B&&W===0?f.value=!0:z===0&&W===B?f.value=!1:f.value=z<W}),yl(Oa,{transition:m,isReversed:f,transitionCount:h,transitionHeight:p,rootRef:y});const w=$(()=>t.continuous||_.value!==0),Q=$(()=>t.continuous||_.value!==r.items.value.length-1);function L(){w.value&&r.prev()}function E(){Q.value&&r.next()}const D=$(()=>{const z=[],W={icon:n.value?t.nextIcon:t.prevIcon,class:`v-window__${u.value?"right":"left"}`,onClick:r.prev,"aria-label":l("$vuetify.carousel.prev")};z.push(w.value?s.prev?s.prev({props:W}):c(Te,W,null):c("div",null,null));const M={icon:n.value?t.prevIcon:t.nextIcon,class:`v-window__${u.value?"left":"right"}`,onClick:r.next,"aria-label":l("$vuetify.carousel.next")};return z.push(Q.value?s.next?s.next({props:M}):c(Te,M,null):c("div",null,null)),z}),F=$(()=>t.touch===!1?t.touch:{...{left:()=>{u.value?L():E()},right:()=>{u.value?E():L()},start:W=>{let{originalEvent:M}=W;M.stopPropagation()}},...t.touch===!0?{}:t.touch});return be(()=>ba(c(t.tag,{ref:y,class:["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover"},o.value,t.class],style:t.style},{default:()=>{var z,W;return[c("div",{class:"v-window__container",style:{height:p.value}},[(z=s.default)==null?void 0:z.call(s,{group:r}),t.showArrows!==!1&&c("div",{class:"v-window__controls"},[D.value])]),(W=s.additional)==null?void 0:W.call(s,{group:r})]}}),[[pl("touch"),F.value]])),{group:r}}}),Wi=ge({..._a(Ha(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Oi=_e()({name:"VTabsWindow",props:Wi(),emits:{"update:modelValue":t=>!0},setup(t,i){let{slots:s}=i;const o=wa(Et,null),n=rt(t,"modelValue"),l=$({get(){var r;return n.value!=null||!o?n.value:(r=o.items.value.find(y=>o.selected.value.includes(y.id)))==null?void 0:r.value},set(r){n.value=r}});return be(()=>{const r=da.filterProps(t);return c(da,ee({_as:"VTabsWindow"},r,{modelValue:l.value,"onUpdate:modelValue":y=>l.value=y,class:["v-tabs-window",t.class],style:t.style,mandatory:!1,touch:!1}),s)}),{}}}),Ua=ge({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ae(),...bl(),...gl()},"VWindowItem"),ca=_e()({name:"VWindowItem",directives:{Touch:Wa},props:Ua(),emits:{"group:selected":t=>!0},setup(t,i){let{slots:s}=i;const o=wa(Oa),n=fl(t,Na),{isBooted:l}=ut();if(!o||!n)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const r=ke(!1),y=$(()=>l.value&&(o.isReversed.value?t.reverseTransition!==!1:t.transition!==!1));function u(){!r.value||!o||(r.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function f(){var w;r.value||!o||(r.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=We((w=o.rootRef.value)==null?void 0:w.clientHeight)),o.transitionCount.value+=1)}function m(){u()}function h(w){r.value&&va(()=>{!y.value||!r.value||!o||(o.transitionHeight.value=We(w.clientHeight))})}const p=$(()=>{const w=o.isReversed.value?t.reverseTransition:t.transition;return y.value?{name:typeof w!="string"?o.transition.value:w,onBeforeEnter:f,onAfterEnter:u,onEnterCancelled:m,onBeforeLeave:f,onAfterLeave:u,onLeaveCancelled:m,onEnter:h}:!1}),{hasContent:_}=hl(t,n.isSelected);return be(()=>c(_l,{transition:p.value,disabled:!l.value},{default:()=>{var w;return[ba(c("div",{class:["v-window-item",n.selectedClass.value,t.class],style:t.style},[_.value&&((w=s.default)==null?void 0:w.call(s))]),[[wl,n.isSelected.value]])]}})),{groupItem:n}}}),Ni=ge({...Ua()},"VTabsWindowItem"),Hi=_e()({name:"VTabsWindowItem",props:Ni(),setup(t,i){let{slots:s}=i;return be(()=>{const o=ca.filterProps(t);return c(ca,ee({_as:"VTabsWindowItem"},o,{class:["v-tabs-window-item",t.class],style:t.style}),s)}),{}}});function Ui(t){return t?t.map(i=>Pl(i)?i:{text:i,value:i}):[]}const xi=ge({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...kl({mandatory:"force",selectedClass:"v-tab-item--selected"}),...ha(),...He()},"VTabs"),Fi=_e()({name:"VTabs",props:xi(),emits:{"update:modelValue":t=>!0},setup(t,i){let{attrs:s,slots:o}=i;const n=rt(t,"modelValue"),l=$(()=>Ui(t.items)),{densityClasses:r}=ya(t),{backgroundColorClasses:y,backgroundColorStyles:u}=Ge(ie(t,"bgColor")),{scopeId:f}=ma();return It({VTab:{color:ie(t,"color"),direction:ie(t,"direction"),stacked:ie(t,"stacked"),fixed:ie(t,"fixedTabs"),sliderColor:ie(t,"sliderColor"),hideSlider:ie(t,"hideSlider")}}),be(()=>{const m=Jt.filterProps(t),h=!!(o.window||t.items.length>0);return c(G,null,[c(Jt,ee(m,{modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},r.value,y.value,t.class],style:[{"--v-tabs-height":We(t.height)},u.value,t.style],role:"tablist",symbol:Et},f,s),{default:()=>{var p;return[((p=o.default)==null?void 0:p.call(o))??l.value.map(_=>{var w;return((w=o.tab)==null?void 0:w.call(o,{item:_}))??c(_t,ee(_,{key:_.text,value:_.value}),{default:o[`tab.${_.value}`]?()=>{var Q;return(Q=o[`tab.${_.value}`])==null?void 0:Q.call(o,{item:_})}:void 0})})]}}),h&&c(Oi,ee({modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,key:"tabs-window"},f),{default:()=>{var p;return[l.value.map(_=>{var w;return((w=o.item)==null?void 0:w.call(o,{item:_}))??c(Hi,{value:_.value},{default:()=>{var Q;return(Q=o[`item.${_.value}`])==null?void 0:Q.call(o,{item:_})}})}),(p=o.window)==null?void 0:p.call(o)]}})])}),{}}}),Yi=["onClick"],Xi={class:"main"},Gi={key:0,class:"main-media-details"},ji={key:0,class:"main-media-details-image"},Ki={class:"main-media-details-track-info"},Zi={key:0},Ji={key:0},eo={key:11,style:{margin:"auto","padding-top":"20px"}},to={key:1,class:"main-queue-items"},ao={class:"queue-items-scroll-box"},lo={class:"media-thumb listitem-media-thumb"},io={class:"d-flex"},oo={style:{"white-space":"nowrap"},class:"pr-1"},so={key:0},no={key:0,style:{"margin-left":"50px"}},ro={key:0,class:"text-caption"},uo={key:2,class:"main-queue-items"},co={class:"main-media-details-image main-media-details-image-alt"},mo={class:"player-bottom"},vo={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},po={class:"media-controls"},yo={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},fo={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},ho=Y({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(t){const{name:i}=Pt(),s=t,o=new ht,n=A(-1),l=new ht,r=A([]),y=A(0),u=A(!1),f=$(()=>a.activePlayerQueue?r.value.slice(a.activePlayerQueue.current_index):[]),m=$(()=>a.activePlayerQueue?r.value.slice(0,a.activePlayerQueue.current_index).reverse():[]),h=$(()=>{switch(i.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return a.showQueueItems?"1.5em":"2.5em";case"xl":return a.showQueueItems?"1.6em":"3em";case"xxl":return a.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),p=$(()=>{switch(i.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return a.showQueueItems?"1.0em":"1.6em";case"xl":return a.showQueueItems?"1.2em":"2em";case"xxl":return a.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),_=$(()=>st.display.height.value>800),w=function(V){a.showFullscreenPlayer=!1,ot.push({name:V.media_type,params:{itemId:V.item_id,provider:V.provider}})},Q=function(V){a.globalSearchTerm=V,ot.push({name:"search"}),a.showFullscreenPlayer=!1},L=function(V,b){var te,j,ue,we,fe,he,X;const R=r.value.indexOf(b),x=[{label:"play_now",labelArgs:[],action:()=>{D(b,"play_now")},icon:"mdi-play-circle-outline",disabled:R===((te=a.activePlayerQueue)==null?void 0:te.current_index)||R===((j=a.activePlayerQueue)==null?void 0:j.index_in_buffer)},{label:"play_next",labelArgs:[],action:()=>{D(b,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:R<=(((ue=a.activePlayerQueue)==null?void 0:ue.index_in_buffer)||0)},{label:"queue_move_up",labelArgs:[],action:()=>{D(b,"up")},icon:"mdi-arrow-up",disabled:R<=(((we=a.activePlayerQueue)==null?void 0:we.index_in_buffer)||0)},{label:"queue_move_down",labelArgs:[],action:()=>{D(b,"down")},icon:"mdi-arrow-down",disabled:R<=(((fe=a.activePlayerQueue)==null?void 0:fe.index_in_buffer)||0)},{label:"queue_delete",labelArgs:[],action:()=>{D(b,"delete")},icon:"mdi-delete",disabled:R<=(((he=a.activePlayerQueue)==null?void 0:he.index_in_buffer)||0)}];((X=b==null?void 0:b.media_item)==null?void 0:X.media_type)==U.TRACK&&x.push({label:"show_info",labelArgs:[],action:()=>{w(b.media_item)},icon:"mdi-information-outline",disabled:!1}),Me.emit("contextmenu",{items:x,posX:V.clientX,posY:V.clientY})},E=function(V){a.activePlayer&&Me.emit("contextmenu",{items:Da(a.activePlayer,a.activePlayerQueue),posX:V.clientX,posY:V.clientY})},D=function(V,b){var R,x,te,j,ue;!V||!a.activePlayerQueue||(b=="play_now"?k.queueCommandPlayIndex((R=a.activePlayerQueue)==null?void 0:R.queue_id,V.queue_item_id):b=="move_next"?k.queueCommandMoveNext((x=a.activePlayerQueue)==null?void 0:x.queue_id,V.queue_item_id):b=="up"?k.queueCommandMoveUp((te=a.activePlayerQueue)==null?void 0:te.queue_id,V.queue_item_id):b=="down"?k.queueCommandMoveDown((j=a.activePlayerQueue)==null?void 0:j.queue_id,V.queue_item_id):b=="delete"&&k.queueCommandDelete((ue=a.activePlayerQueue)==null?void 0:ue.queue_id,V.queue_item_id))},F=async function(){u.value=!0,r.value=[],await ea(100),u.value=!1},z=async function({done:V}){var te;if(!a.activePlayerQueue||a.activePlayerQueue.items==0){V("empty");return}if(r.value.length>=((te=a.activePlayerQueue)==null?void 0:te.items)){V("empty");return}const b=r.value.length,R=(a.activePlayerQueue.current_index||0)+50,x=await k.getPlayerQueueItems(a.activePlayerQueue.queue_id,R,b);r.value.push(...x),x.length<50?V("empty"):V("ok")};Ne(()=>{const V=k.subscribe(Cl.QUEUE_ITEMS_UPDATED,b=>{var R;b.object_id==((R=a.activePlayerQueue)==null?void 0:R.queue_id)&&(b.data,F())});tt(V)});const W=async function(V){var x;if(!((x=a.curQueueItem)!=null&&x.media_item))return;if(!a.curQueueItem.media_item.favorite){k.toggleFavorite(a.curQueueItem.media_item);return}let b=a.curQueueItem.media_item;(b.provider!="library"||!("provider_mappings"in b))&&[U.ALBUM,U.ARTIST,U.AUDIOBOOK,U.PLAYLIST,U.PODCAST,U.RADIO,U.TRACK].includes(b.media_type)&&(b=await k.getLibraryItem(b.media_type,b.item_id,b.provider)||b);const R=[];"favorite"in b&&b.favorite&&b.provider=="library"&&[U.ALBUM,U.ARTIST,U.AUDIOBOOK,U.PLAYLIST,U.PODCAST,U.RADIO,U.TRACK].includes(b.media_type)&&R.push({label:"favorites_remove",labelArgs:[],action:()=>{k.removeItemFromFavorites(b.media_type,b.item_id),b.favorite=!1,a.curQueueItem.media_item.favorite=!1},icon:"mdi-heart"}),[U.ALBUM,U.ARTIST,U.AUDIOBOOK,U.PLAYLIST,U.PODCAST,U.RADIO,U.TRACK].includes(b.media_type)&&R.push({label:"add_playlist",labelArgs:[],action:()=>{Me.emit("playlistdialog",{items:[a.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}),Me.emit("contextmenu",{items:R,posX:V.clientX,posY:V.clientY})},M=function(){u.value=!0,ea(100).then(()=>{u.value=!1})},B=function(V,b){k.playMedia(V.uri,Il.PLAY,void 0,b.position.toString())};se(()=>a.activePlayerId,V=>{F()},{immediate:!0});const q=A(void 0),O=A(void 0);return gt(()=>{const V=lt("white"),b=lt("black"),R=5,x=.05,te=st.theme.current.value.dark?s.colorPalette.darkColor||"#000":s.colorPalette.lightColor||"#fff";let j=lt(te);const ue=V.contrast(j),we=b.contrast(j),fe=ue>=we;let he=fe?V:b,X=Math.max(ue,we);if(X<R){let Pe=x;for(;X<R&&Pe<=.5;)fe?j=j.darken(x):j=j.lighten(x),X=lt(he).contrast(j),Pe+=x}document.documentElement.style.setProperty("--text-color",he.hex()),q.value=he.hex(),O.value=j.hex()}),(V,b)=>(d(),C($a,{modelValue:e(a).showFullscreenPlayer,"onUpdate:modelValue":b[12]||(b[12]=R=>e(a).showFullscreenPlayer=R),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999"},{default:v(()=>[c(Oe,{color:O.value},{default:v(()=>{var R,x,te,j,ue,we,fe,he,X,Pe,Ue,xe,At,Lt,zt,qt,Rt,Dt,Wt,Ot,Nt,Ht,Ut,xt,Ft,Yt,Xt,Gt,jt;return[c(Nl,{class:"v-toolbar-default",color:"transparent"},{prepend:v(()=>[c(le,{icon:"",onClick:b[0]||(b[0]=T=>e(a).showFullscreenPlayer=!1)},{default:v(()=>[c(H,{icon:"mdi-chevron-down"})]),_:1})]),append:v(()=>{var T;return[(T=e(a).activePlayerQueue)!=null&&T.radio_source.length?(d(),C(Tt,{key:0,scrim:""},{activator:v(({props:K})=>[c(le,ee(K,{icon:""}),{default:v(()=>[c(H,{color:"accent",icon:"mdi-radio-tower"})]),_:2},1040)]),default:v(()=>[c(Oe,{title:e(ne)("queue_radio_enabled"),subtitle:e(ne)("queue_radio_based_on")},{text:v(()=>{var K;return[(d(!0),g(G,null,re((K=e(a).activePlayerQueue)==null?void 0:K.radio_source,ve=>(d(),g("div",{key:ve.uri},[S("a",{onClick:ze=>w(ve)},I(ve.name),9,Yi)]))),128))]}),_:1},8,["title","subtitle"])]),_:1})):P("",!0),_.value?P("",!0):(d(),C(Ra,{key:1})),c(le,{icon:"",onClick:oe(E,["stop"])},{default:v(()=>[c(H,{icon:"mdi-dots-vertical"})]),_:1})]}),_:1}),S("div",Xi,[e(Z)("bp7")||!e(a).showQueueItems?(d(),g("div",Gi,[V.$vuetify.display.height>600?(d(),g("div",ji,[((R=e(a).activePlayer)==null?void 0:R.powered)!=!1&&!((x=e(a).curQueueItem)!=null&&x.image)&&((j=(te=e(a).activePlayer)==null?void 0:te.current_media)!=null&&j.image_url)?(d(),C(je,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(a).activePlayer.current_media.image_url},null,8,["src"])):((ue=e(a).activePlayer)==null?void 0:ue.powered)!=!1?(d(),C(De,{key:1,item:e(a).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"},fallback:V.$vuetify.theme.current.dark?e(Je):e(yt)},null,8,["item","fallback"])):(d(),C(je,{key:2,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:V.$vuetify.theme.current.dark?e(Je):e(yt)},null,8,["src"]))])):P("",!0),S("div",Ki,[((we=e(a).activePlayer)==null?void 0:we.powered)==!1?(d(),C(Fe,{key:0,style:J(`font-size: ${h.value};`)},{default:v(()=>{var T;return[N(I((T=e(a).activePlayer)==null?void 0:T.display_name),1)]}),_:1},8,["style"])):(fe=e(a).curQueueItem)!=null&&fe.media_item?(d(),C(Fe,{key:1,style:J(`font-size: ${h.value};cursor:pointer;`),onClick:b[1]||(b[1]=T=>w(e(a).curQueueItem.media_item))},{default:v(()=>[c(ye,{sync:e(o)},{default:v(()=>[N(I(e(a).curQueueItem.media_item.name)+" ",1),"version"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.version?(d(),g("span",Zi,"("+I(e(a).curQueueItem.media_item.version)+")",1)):P("",!0)]),_:1},8,["sync"])]),_:1},8,["style"])):!e(a).activePlayerQueue&&((X=(he=e(a).activePlayer)==null?void 0:he.current_media)!=null&&X.title)?(d(),C(Fe,{key:2},{default:v(()=>{var T,K,ve,ze;return[(K=(T=e(a).activePlayer)==null?void 0:T.current_media)!=null&&K.artist?(d(),g("div",Ji,[c(ye,{sync:e(o)},{default:v(()=>{var Ce,Ie;return[N(I((Ie=(Ce=e(a).activePlayer)==null?void 0:Ce.current_media)==null?void 0:Ie.artist),1)]}),_:1},8,["sync"])])):P("",!0),(ze=(ve=e(a).activePlayer)==null?void 0:ve.current_media)!=null&&ze.title?(d(),g("div",{key:1,style:J(`font-size: ${p.value};`)},[c(ye,{sync:e(o)},{default:v(()=>{var Ce,Ie;return[N(I((Ie=(Ce=e(a).activePlayer)==null?void 0:Ce.current_media)==null?void 0:Ie.title),1)]}),_:1},8,["sync"])],4)):P("",!0)]}),_:1})):(d(),C(Fe,{key:3,style:J(`font-size: ${h.value};cursor:pointer;`),onClick:b[2]||(b[2]=T=>e(a).showPlayersMenu=!0)},{default:v(()=>[c(ye,{sync:e(o)},{default:v(()=>{var T;return[N(I(((T=e(a).activePlayer)==null?void 0:T.display_name)||e(ne)("no_player")),1)]}),_:1},8,["sync"])]),_:1},8,["style"])),((Pe=e(a).activePlayer)==null?void 0:Pe.powered)==!1?(d(),C(Qe,{key:4,class:"text-h6 text-md-h5 text-lg-h4"},{default:v(()=>[N(I(e(ne)("off")),1)]),_:1})):P("",!0),(xe=(Ue=e(a).curQueueItem)==null?void 0:Ue.streamdetails)!=null&&xe.stream_title&&((At=e(a).activePlayer)==null?void 0:At.powered)!=!1?(d(),C(Qe,{key:5,class:"text-h6 text-md-h5 text-lg-h4",onClick:b[3]||(b[3]=T=>{var K,ve;return Q((ve=(K=e(a).curQueueItem)==null?void 0:K.streamdetails)==null?void 0:ve.stream_title)})},{default:v(()=>[c(ye,{sync:e(o)},{default:v(()=>[N(I(e(a).curQueueItem.streamdetails.stream_title),1)]),_:1},8,["sync"])]),_:1})):P("",!0),(Lt=e(a).curQueueItem)!=null&&Lt.media_item&&"album"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.album&&((zt=e(a).activePlayer)==null?void 0:zt.powered)!=!1?(d(),C(Qe,{key:6,style:J(`font-size: ${p.value};cursor:pointer;`),onClick:b[4]||(b[4]=T=>w(e(a).curQueueItem.media_item.album))},{default:v(()=>[c(ye,{sync:e(o)},{default:v(()=>[N(I(e(a).curQueueItem.media_item.album.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):P("",!0),(qt=e(a).curQueueItem)!=null&&qt.media_item&&"artists"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.artists.length&&((Rt=e(a).activePlayer)==null?void 0:Rt.powered)!=!1?(d(),C(Qe,{key:7,style:J(`font-size: ${p.value};cursor:pointer;`),onClick:b[5]||(b[5]=T=>w(e(a).curQueueItem.media_item.artists[0]))},{default:v(()=>[c(ye,{sync:e(o)},{default:v(()=>[N(I(e(a).curQueueItem.media_item.artists[0].name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):P("",!0),(Dt=e(a).curQueueItem)!=null&&Dt.media_item&&"podcast"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.podcast?(d(),C(Qe,{key:8,style:J(`font-size: ${p.value};`)},{default:v(()=>[c(ye,{sync:e(o)},{default:v(()=>[N(I(e(a).curQueueItem.media_item.podcast.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):e(a).activePlayer&&((Wt=e(a).activePlayer)==null?void 0:Wt.active_source)!=((Ot=e(a).activePlayer)==null?void 0:Ot.player_id)&&((Nt=e(a).activePlayer)==null?void 0:Nt.powered)!=!1?(d(),C(Qe,{key:9},{default:v(()=>[N(I(e(ne)("external_source_active",[e(Qt)(e(a).activePlayer)])),1)]),_:1})):e(a).activePlayerQueue&&e(a).activePlayerQueue.items==0&&((Ht=e(a).activePlayer)==null?void 0:Ht.powered)!=!1?(d(),C(Qe,{key:10,style:J(`font-size: ${p.value}`)},{default:v(()=>[N(I(e(ne)("queue_empty")),1)]),_:1},8,["style"])):P("",!0),((Ut=e(a).activePlayer)==null?void 0:Ut.powered)!=!1?(d(),g("div",eo,[c(ka)])):P("",!0)])])):P("",!0),e(a).showQueueItems?(d(),g("div",to,[c(Fi,{modelValue:y.value,"onUpdate:modelValue":b[6]||(b[6]=T=>y.value=T),"hide-slider":"",density:"compact",onClick:M},{default:v(()=>[c(_t,{value:0},{default:v(()=>{var T,K;return[N(I(e(ne)("queue"))+" ",1),c(ft,{color:"grey",content:(((T=e(a).activePlayerQueue)==null?void 0:T.items)||0)-(((K=e(a).activePlayerQueue)==null?void 0:K.current_index)||0),inline:""},null,8,["content"])]}),_:1}),c(_t,{value:1},{default:v(()=>{var T;return[N(I(e(ne)("played"))+" ",1),c(ft,{color:"grey",content:(T=e(a).activePlayerQueue)==null?void 0:T.current_index,inline:""},null,8,["content"])]}),_:1})]),_:1},8,["modelValue"]),S("div",ao,[u.value?P("",!0):(d(),C(Rl,{key:0,onLoad:z,"empty-text":"",height:"100%"},{default:v(()=>[c(Hl,{"item-height":70,"max-height":"90%",items:y.value==0?f.value:m.value},{default:v(({item:T,index:K})=>{var ve,ze,Ce,Ie,Kt;return[c(Fa,{link:"","show-menu-btn":!0,disabled:!T.available,onClick:oe(pe=>L(pe,T),["stop"]),onMenu:oe(pe=>L(pe,T),["stop"]),onMouseenter:pe=>n.value=K,onMouseleave:b[7]||(b[7]=pe=>n.value=-1)},{prepend:v(()=>[S("div",lo,[c(De,{size:"50",item:T},null,8,["item"])])]),title:v(()=>[c(ye,{sync:K==0&&y.value==0?e(o):e(l),disabled:!(K==0&&y.value==0||n.value==K)},{default:v(()=>[N(I(T.name),1)]),_:2},1032,["sync","disabled"])]),subtitle:v(()=>[S("div",io,[S("span",oo,I(e(Xe)(T.duration))+" | ",1),c(ye,{sync:K==0&&y.value==0?e(o):e(l),disabled:!(K==0&&y.value==0||n.value==K)},{default:v(()=>[T.media_item&&"album"in T.media_item&&T.media_item.album?(d(),g("span",so,I(T.media_item.album.name),1)):P("",!0)]),_:2},1032,["sync","disabled"])])]),append:v(()=>[T.available?P("",!0):(d(),C(H,{key:0},{default:v(()=>b[13]||(b[13]=[N("mdi-alert")])),_:1}))]),_:2},1032,["disabled","onClick","onMenu","onMouseenter"]),T.queue_item_id==((ve=e(a).curQueueItem)==null?void 0:ve.queue_item_id)&&((Ie=(Ce=(ze=T.media_item)==null?void 0:ze.metadata)==null?void 0:Ce.chapters)!=null&&Ie.length)?(d(),g("div",no,[(d(!0),g(G,null,re((Kt=T.media_item.metadata)==null?void 0:Kt.chapters,pe=>(d(),C(me,{key:pe.position,onClick:oe(Rs=>B(T.media_item,pe),["stop"])},{title:v(()=>[S("div",null,I(pe.name),1)]),append:v(()=>[pe.end?(d(),g("span",ro,I(e(Xe)(pe.end-pe.start)),1)):P("",!0)]),_:2},1032,["onClick"]))),128))])):P("",!0)]}),_:1},8,["items"])]),_:1}))])])):P("",!0),!e(a).showQueueItems&&V.$vuetify.display.height<=600?(d(),g("div",uo,[S("div",co,[c(De,{item:e(a).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"}},null,8,["item"])])])):P("",!0)]),S("div",mo,[S("div",vo,[c(Ma,{"show-labels":!0,color:q.value},null,8,["color"])]),S("div",po,[e(a).activePlayerQueue?(d(),C(Le,{key:0,disabled:!((xt=e(a).curQueueItem)!=null&&xt.media_item),icon:(Yt=(Ft=e(a).curQueueItem)==null?void 0:Ft.media_item)!=null&&Yt.favorite?"mdi-heart":"mdi-heart-outline",title:e(ne)("tooltip.favorite"),type:"btn",class:"media-controls-item","max-height":"30px",onClick:W},null,8,["disabled","icon","title"])):P("",!0),V.$vuetify.display.mdAndUp?(d(),C(Ea,{key:1,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):P("",!0),c(La,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),c(Aa,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"100px"},null,8,["player","player-queue"]),c(za,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),V.$vuetify.display.mdAndUp?(d(),C(Ba,{key:2,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):P("",!0),e(a).activePlayerQueue?(d(),C(qa,{key:3,class:"media-controls-item","max-height":"30px"})):P("",!0)]),e(a).activePlayer?(d(),g("div",yo,[c(et,{width:"100%","is-powered":((Xt=e(a).activePlayer)==null?void 0:Xt.powered)!=!1,disabled:!e(a).activePlayer||!((Gt=e(a).activePlayer)!=null&&Gt.available),"model-value":Math.round(((jt=e(a).activePlayer)==null?void 0:jt.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus",color:q.value,"allow-wheel":!0,"onUpdate:modelValue":b[8]||(b[8]=T=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolume(e(a).activePlayerId,T):e(k).playerCommandVolumeSet(e(a).activePlayerId,T)),"onClick:prepend":b[9]||(b[9]=T=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolumeDown(e(a).activePlayerId):e(k).playerCommandVolumeDown(e(a).activePlayerId)),"onClick:append":b[10]||(b[10]=T=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolumeUp(e(a).activePlayerId):e(k).playerCommandVolumeUp(e(a).activePlayerId))},null,8,["is-powered","disabled","model-value","color"])])):P("",!0),_.value?(d(),g("div",fo,[c(Te,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:b[11]||(b[11]=T=>e(a).showPlayersMenu=!0)},{default:v(()=>{var T;return[c(H,{icon:((T=e(a).activePlayer)==null?void 0:T.icon)||"mdi-speaker"},null,8,["icon"]),N(" "+I(e(a).activePlayer?e(dt)(e(a).activePlayer):""),1)]}),_:1})])):P("",!0)])]}),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),_o=de(ho,[["__scopeId","data-v-ce148dae"]]),go={key:1},bo={key:2,class:"icon-thumb"},wo={key:0},ko={key:2},Po={key:3},Co={key:4},Io={key:0,class:"pl-4"},Vo={key:0},$o={key:1},So={key:2},To={key:3},Qo={key:4,class:"line-clamp-1"},Mo={key:5,class:"line-clamp-1"},Bo={key:6},Eo={key:7,class:"line-clamp-1"},Ao={key:8,class:"line-clamp-1"},Lo={key:0},zo=Y({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(t){const i=new ht,s=t,o=$(()=>{var n,l;return(l=(n=a.activePlayerQueue)==null?void 0:n.current_item)==null?void 0:l.streamdetails});return(n,l)=>(d(),g(G,null,[c(me,{style:{height:"auto",width:"fit-content",margin:"0px",padding:"0px"},lines:"two"},{prepend:v(()=>{var r,y,u,f,m,h,p,_,w,Q;return[S("div",{class:"media-thumb player-media-thumb",style:J(`cursor: pointer;height: ${e(Z)({breakpoint:"phone"})?50:64}px; width: ${e(Z)({breakpoint:"phone"})?50:64}px; `),onClick:l[0]||(l[0]=L=>e(a).showFullscreenPlayer=!0)},[((r=e(a).activePlayer)==null?void 0:r.powered)!=!1&&((y=e(a).curQueueItem)!=null&&y.media_item||(u=e(a).curQueueItem)!=null&&u.image)?(d(),C(De,{key:0,item:((f=e(a).curQueueItem)==null?void 0:f.media_item)||e(a).curQueueItem,fallback:e(Je)},null,8,["item","fallback"])):((m=e(a).activePlayer)==null?void 0:m.powered)!=!1&&((p=(h=e(a).activePlayer)==null?void 0:h.current_media)!=null&&p.image_url)?(d(),g("div",go,[c(je,{class:"media-thumb",style:{"border-radius":"4px"},size:"55",src:e(a).activePlayer.current_media.image_url},null,8,["src"])])):(d(),g("div",bo,[c(H,{size:"35",icon:((_=e(a).activePlayer)==null?void 0:_.type)==e(Se).PLAYER&&((w=e(a).activePlayer)!=null&&w.group_childs.length)?"mdi-speaker-multiple":((Q=e(a).activePlayer)==null?void 0:Q.icon)||"mdi-speaker",style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))],4)]}),title:v(()=>{var r,y,u,f,m,h;return[S("div",{style:J({cursor:"pointer",color:n.primaryColor})},[((r=e(a).activePlayer)==null?void 0:r.powered)==!1?(d(),g("div",{key:0,onClick:l[1]||(l[1]=p=>e(a).showPlayersMenu=!0)},I((y=e(a).activePlayer)==null?void 0:y.display_name),1)):(u=e(a).curQueueItem)!=null&&u.media_item?(d(),g("div",{key:1,onClick:l[2]||(l[2]=p=>e(a).showFullscreenPlayer=!0)},[c(ye,{sync:e(i)},{default:v(()=>[N(I(e(a).curQueueItem.media_item.name)+" ",1),"version"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.version?(d(),g("span",wo,"("+I(e(a).curQueueItem.media_item.version)+")",1)):P("",!0)]),_:1},8,["sync"])])):e(a).curQueueItem?(d(),g("div",ko,I(e(a).curQueueItem.name),1)):!e(a).activePlayerQueue&&((m=(f=e(a).activePlayer)==null?void 0:f.current_media)!=null&&m.title)?(d(),g("div",Po,I(e(a).activePlayer.current_media.title),1)):e(a).activePlayer?(d(),g("div",Co,I((h=e(a).activePlayer)==null?void 0:h.display_name),1)):(d(),g("div",{key:5,onClick:l[3]||(l[3]=p=>e(a).showPlayersMenu=!0)},I(n.$t("no_player")),1))],4)]}),append:v(()=>{var r;return[(r=o.value)!=null&&r.audio_format.content_type&&!e(Z)({breakpoint:"phone"})&&n.showQualityDetailsBtn?(d(),g("div",Io,[c(ka)])):P("",!0)]}),subtitle:v(()=>{var r;return[S("div",{style:J({cursor:"pointer",color:n.primaryColor}),class:"line-clamp-1",onClick:l[4]||(l[4]=y=>e(a).showFullscreenPlayer=!0)},[c(ye,{sync:e(i)},{default:v(()=>{var y,u,f,m,h,p,_,w,Q,L,E,D,F,z,W;return[((y=e(a).activePlayer)==null?void 0:y.powered)==!1?(d(),g("div",Vo,I(n.$t("off")),1)):e(a).curQueueItem&&((u=e(a).curQueueItem.media_item)==null?void 0:u.media_type)==e(U).TRACK&&"album"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.album&&!s.showOnlyArtist?(d(),g("div",$o,I(e(Pa)(e(a).curQueueItem.media_item.artists))+" • "+I(e(a).curQueueItem.media_item.album.name),1)):(f=e(a).curQueueItem)!=null&&f.media_item&&"artists"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.artists.length>0?(d(),g("div",So,I(e(a).curQueueItem.media_item.artists[0].name),1)):(m=e(a).curQueueItem)!=null&&m.media_item&&"podcast"in e(a).curQueueItem.media_item&&((h=e(a).curQueueItem.media_item.podcast)!=null&&h.name)?(d(),g("div",To,I(e(a).curQueueItem.media_item.podcast.name),1)):(_=(p=e(a).curQueueItem)==null?void 0:p.streamdetails)!=null&&_.stream_title?(d(),g("div",Qo,I((Q=(w=e(a).curQueueItem)==null?void 0:w.streamdetails)==null?void 0:Q.stream_title),1)):(E=(L=e(a).curQueueItem)==null?void 0:L.media_item)!=null&&E.metadata.description?(d(),g("div",Mo,I(e(Ca)(e(a).curQueueItem.media_item.metadata.description,100)),1)):!e(a).activePlayerQueue&&((D=e(a).activePlayer)!=null&&D.active_source)&&((z=(F=e(a).activePlayer)==null?void 0:F.current_media)!=null&&z.artist)?(d(),g("div",Bo,I(e(a).activePlayer.current_media.artist),1)):!e(a).activePlayerQueue&&((W=e(a).activePlayer)!=null&&W.active_source)?(d(),g("div",Eo,I(n.$t("external_source_active",[e(Qt)(e(a).activePlayer)])),1)):e(a).activePlayerQueue&&e(a).activePlayerQueue.items==0?(d(),g("div",Ao,I(n.$t("queue_empty")),1)):P("",!0)]}),_:1},8,["sync"]),e(a).activePlayer&&((r=e(a).activePlayer)==null?void 0:r.powered)!=!1?(d(),g("div",Lo,I(e(dt)(e(a).activePlayer)),1)):P("",!0)],4)]}),_:1}),c(_o,{"show-fullscreen":e(a).showFullscreenPlayer,"color-palette":n.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),qo={key:1,class:"text-caption volumecaption"},Ro={key:0,class:"text-caption volumecaption"},Do=Y({__name:"VolumeControl",props:{player:{},showSyncControls:{type:Boolean},showSubPlayers:{type:Boolean},showHeadingRow:{type:Boolean},showVolumeControl:{type:Boolean},allowWheel:{type:Boolean}},setup(t){const i=t,s=A([]),o=A([]),n=A(void 0),l=$(()=>i.player.group_childs.length>0),r=function(u){var m,h;const f=[];for(const p of u.group_childs){const _=(m=k)==null?void 0:m.players[p];_&&_.volume_control!=ce&&_&&_.available&&!f.includes(_)&&f.push(_)}if(i.showSyncControls&&u.supported_features.includes($e.SET_MEMBERS))for(const p of Object.values((h=k)==null?void 0:h.players))p.player_id!=u.player_id&&(!u.can_group_with.includes(p.player_id)&&!u.can_group_with.includes(p.provider)||p.available&&(p.active_group&&p.active_group!=u.player_id||p.active_source&&p.state==Ve.PLAYING&&![u.player_id,p.player_id].includes(p.active_source)||f.includes(p)||f.push(p)));return f.sort((p,_)=>p.display_name.toUpperCase()>_.display_name.toUpperCase()?1:-1),f},y=async function(u,f){const m=i.player.player_id;f?(o.value.includes(u)&&(o.value=o.value.filter(h=>h!=u)),s.value.includes(u)||s.value.push(u),k.players[m].group_childs.push(u)):(s.value.includes(u)&&(s.value=s.value.filter(h=>h!=u)),o.value.includes(u)||o.value.push(u),k.players[m].group_childs=k.players[m].group_childs.filter(h=>h!=u)),n.value!=null&&clearTimeout(n.value),n.value=setTimeout(async()=>{o.value.length>0&&k.playerCommandUnGroupMany(o.value).catch(async()=>{k.players[m]=await k.getPlayer(m)}).finally(()=>{o.value=[]}),s.value.length>0&&k.playerCommandGroupMany(m,s.value).catch(async()=>{k.players[m]=await k.getPlayer(m)}).finally(()=>{s.value=[]})},1e3)};return(u,f)=>(d(),C(Ee,{style:{overflow:"hidden",padding:"0"},lines:"two"},{default:v(()=>[u.showHeadingRow?(d(),C(me,{key:0,class:"volumesliderrow heading",link:!1,style:J(u.player.powered==!1?"opacity: 0.6":"opacity: 1")},{prepend:v(()=>[c(H,{size:25,icon:u.player.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:v(()=>[S("h5",null,I(e(dt)(u.player,27)),1)]),append:v(()=>[u.player.power_control!=e(ce)?(d(),C(le,{key:0,class:"powerbtn",variant:"icon",onClick:f[0]||(f[0]=oe(m=>e(k).playerCommandPowerToggle(u.player.player_id),["stop"]))},{default:v(()=>[c(H,{size:25,icon:"mdi-power"})]),_:1})):P("",!0)]),_:1},8,["style"])):P("",!0),u.showVolumeControl&&(u.player.volume_control!=e(ce)||u.player.group_childs.length)?(d(),C(me,{key:1,class:"volumesliderrow",link:!1,style:J(u.player.powered==!1?"opacity: 0.35":"opacity: 0.75")},{prepend:v(()=>[c(le,{icon:"",style:{height:"25px"},disabled:u.player.type==e(Se).GROUP||u.player.group_childs.length>0||u.player.mute_control==e(ce),onClick:f[1]||(f[1]=oe(m=>e(k).playerCommandMuteToggle(u.player.player_id),["stop"]))},{default:v(()=>[c(H,{size:25,icon:u.player.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:1},8,["disabled"])]),default:v(()=>[u.player.volume_control!=e(ce)||u.player.group_childs.length?(d(),C(et,{key:0,color:"secondary",width:"100%","is-powered":u.player.powered!=!1,disabled:!u.player.available,"model-value":Math.round(u.player.group_childs.length?u.player.group_volume:u.player.volume_level||0),onClick:f[2]||(f[2]=oe(()=>{},["stop"])),"onUpdate:modelValue":f[3]||(f[3]=m=>u.player.group_childs.length>0?e(k).playerCommandGroupVolume(u.player.player_id,m):e(k).playerCommandVolumeSet(u.player.player_id,m))},null,8,["is-powered","disabled","model-value"])):P("",!0)]),append:v(()=>[l.value&&!u.showSubPlayers?(d(),C(H,{key:0,class:"expandbtn"},{default:v(()=>f[7]||(f[7]=[N(" mdi-chevron-down ")])),_:1})):(d(),g("div",qo,I(Math.round(u.player.group_childs.length?u.player.group_volume:u.player.volume_level||0)),1))]),_:1},8,["style"])):P("",!0),u.showSubPlayers&&(u.player.group_childs.length>0||u.showSyncControls)&&r(u.player).length>0?(d(),g("div",{key:2,onClick:f[6]||(f[6]=oe(()=>{},["stop"]))},[c(Ke,{style:{"margin-top":"10px","margin-bottom":"15px"}}),(d(!0),g(G,null,re(r(u.player),m=>(d(),g("div",{key:m.player_id},[c(me,{class:"volumesliderrow",link:!1,style:J(m.powered!=!1||u.showSyncControls?"opacity: 0.75":"opacity: 0.4"),onClick:f[4]||(f[4]=oe(()=>{},["stop"]))},{prepend:v(()=>[c(H,{size:30,icon:m.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:v(()=>[S("h6",null,I(e(Ca)(m.display_name,27)),1)]),append:v(()=>[u.showSyncControls?(d(),C(Ul,{key:0,ripple:!1,disabled:m.player_id==u.player.player_id,"model-value":u.player.group_childs.includes(m.player_id)||m.player_id==u.player.player_id,size:"22",class:"checkbox","onUpdate:modelValue":h=>y(m.player_id,h)},null,8,["disabled","model-value","onUpdate:modelValue"])):P("",!0)]),_:2},1032,["style"]),m.volume_control!=e(ce)?(d(),C(me,{key:0,class:"volumesliderrow",link:!1,style:J(m.powered==!1?"opacity: 0.4":"opacity: 0.75"),onClick:f[5]||(f[5]=oe(()=>{},["stop"]))},{prepend:v(()=>[c(le,{icon:"",disabled:!m.available||m.mute_control==e(ce),style:{height:"25px"},onClick:h=>e(k).playerCommandMuteToggle(m.player_id)},{default:v(()=>[c(H,{size:25,icon:m.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:2},1032,["disabled","onClick"])]),default:v(()=>[m.volume_control!=e(ce)?(d(),C(et,{key:0,color:"secondary",width:"100%","is-powered":m.powered!=!1,disabled:!m.available,"allow-wheel":u.allowWheel,"model-value":Math.round(m.volume_level||0),"onUpdate:modelValue":h=>e(k).playerCommandVolumeSet(m.player_id,h)},null,8,["is-powered","disabled","allow-wheel","model-value","onUpdate:modelValue"])):P("",!0)]),append:v(()=>[m.volume_control!=e(ce)?(d(),g("div",Ro,I(m.volume_level),1)):P("",!0)]),_:2},1032,["style"])):P("",!0),f[8]||(f[8]=S("div",{style:{height:"14px"}},null,-1))]))),128))])):P("",!0)]),_:1}))}}),xa=de(Do,[["__scopeId","data-v-a2a4ac06"]]),Wo={key:0},Oo={key:0},No={class:"text-caption"},Ho={key:1},Uo=Y({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(t){const i=t,s=A(!1);return(o,n)=>i.isVisible&&e(a).activePlayer?(d(),g("div",Wo,[c(Tt,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=l=>s.value=l),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:o.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:v(({props:l})=>{var r,y;return[e(Z)("bp6")||!o.responsiveVolumeSize?(d(),g("div",Oo,[c(et,{style:"margin-right: 0px; margin-left: 0px;",width:o.volumeSize,"is-powered":!0,"model-value":e(a).activePlayer.group_childs.length>0?Math.round(((r=e(a).activePlayer)==null?void 0:r.group_volume)||0):Math.round(((y=e(a).activePlayer)==null?void 0:y.volume_level)||0),"allow-wheel":!0,"onUpdate:modelValue":n[0]||(n[0]=u=>{var f,m;return e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolume(((f=e(a).activePlayer)==null?void 0:f.player_id)||"",u):e(k).playerCommandVolumeSet(((m=e(a).activePlayer)==null?void 0:m.player_id)||"",u)})},{prepend:v(()=>[c(le,ee({variant:"icon",size:"48",ripple:!1},{...l}),{default:v(()=>{var u,f;return[c(H,{color:i.color?o.color:"",size:24,icon:"mdi-volume-high"},null,8,["color"]),S("div",No,I(e(a).activePlayer.group_childs.length>0?Math.round(((u=e(a).activePlayer)==null?void 0:u.group_volume)||0):Math.round(((f=e(a).activePlayer)==null?void 0:f.volume_level)||0)),1)]}),_:2},1040)]),_:2},1032,["width","model-value"])])):(d(),g("div",Ho,[c(le,ee({...l},{size:"48",variant:"icon"}),{default:v(()=>{var u,f;return[c(H,{color:i.color?o.color:"",icon:"mdi-volume-high"},null,8,["color"]),S("div",{class:"text-caption",style:J({color:i.color?o.color:""})},I(e(a).activePlayer.group_childs.length>0?Math.round(((u=e(a).activePlayer)==null?void 0:u.group_volume)||0):Math.round(((f=e(a).activePlayer)==null?void 0:f.volume_level)||0)),5)]}),_:2},1040)]))]}),default:v(()=>[c(Oe,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:v(()=>[e(a).activePlayer?(d(),C(xa,{key:0,player:e(a).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"show-heading-row":!0,"show-volume-control":!0,"allow-wheel":!0,style:{"margin-left":"18px"}},null,8,["player"])):P("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):P("",!0)}}),xo=de(Uo,[["__scopeId","data-v-f4084555"]]),Fo=Y({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(t){return(i,s)=>(d(),g(G,null,[i.player&&i.player.isVisible?(d(),C(Ra,{key:0,color:i.player.color},null,8,["color"])):P("",!0),i.queue&&i.queue.isVisible?(d(),C(qa,{key:1,color:i.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):P("",!0),i.volume&&i.volume.isVisible?(d(),C(xo,{key:2,color:i.volume.color,"volume-size":i.volume.volumeSize,"responsive-volume-size":i.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):P("",!0)],64))}}),Yo=["data-floating"],Xo=["data-mobile"],Go={class:"mediacontrols-left"},jo={class:"mediacontrols-bottom-center"},Ko={class:"mediacontrols-bottom-right"},Zo={key:0,class:"volume-slider"},Jo=Y({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(t){$l(l=>({"4978018a":n.value})),pa();const{mobile:i}=Pt({mobileBreakpoint:576}),s=A({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),o=new Image;o.src=st.theme.current.value.dark?Je:yt,o.crossOrigin="Anonymous",o.addEventListener("load",function(){s.value=Vl(o)});const n=$(()=>st.theme.current.value.dark?s.value&&s.value.darkColor?s.value.darkColor+"26":"CCCCCC26":s.value&&s.value.lightColor?s.value.lightColor+"26":"CCCCCC26");return se(()=>{var l;return(l=a.curQueueItem)==null?void 0:l.queue_item_id},()=>{var l;(l=a.curQueueItem)!=null&&l.media_item?o.src=ta(a.curQueueItem.media_item,aa.THUMB)||"":a.curQueueItem?o.src=ta(a.curQueueItem,aa.THUMB)||"":o.src=""}),(l,r)=>{var y,u,f,m,h,p,_,w,Q,L,E;return d(),g(G,null,[S("div",{class:"mediacontrols-bg","data-floating":l.useFloatingPlayer},null,8,Yo),S("div",{class:"mediacontrols","data-mobile":e(i)},[S("div",Go,[c(zo,{"show-quality-details-btn":!!e(Z)("bp8"),"show-only-artist":!e(Z)("bp7"),"color-palette":s.value,"primary-color":l.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),S("div",jo,[c(ua,{"visible-components":{repeat:{isVisible:e(Z)("bp3")},shuffle:{isVisible:e(Z)("bp3")},play:{isVisible:!0,icon:{staticWidth:"50px",staticHeight:"50px"},withCircle:l.useFloatingPlayer},previous:{isVisible:e(Z)("bp3")},next:{isVisible:e(Z)("bp3")}}},null,8,["visible-components"]),e(Z)("bp6")?(d(),C(Ma,{key:0,"is-progress-bar":!1,disabled:!((y=e(a).activePlayerQueue)!=null&&y.active)||((m=(f=(u=e(a).activePlayerQueue)==null?void 0:u.current_item)==null?void 0:f.media_item)==null?void 0:m.media_type)!==e(U).TRACK},null,8,["disabled"])):P("",!0)]),S("div",Ko,[S("div",null,[c(Fo,{queue:{isVisible:e(Z)("bp3"),color:l.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:l.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!e(i)&&(((h=e(a).activePlayer)==null?void 0:h.volume_control)!=e(ce)||((p=e(a).activePlayer)==null?void 0:p.group_childs.length)>0),color:l.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),c(ua,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:e(Z)({breakpoint:"bp3",condition:"lt"}),withCircle:!1,icon:{staticWidth:"40px",staticHeight:"40px",color:l.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])],8,Xo),e(i)&&(((_=e(a).activePlayer)==null?void 0:_.volume_control)!=e(ce)||((w=e(a).activePlayer)==null?void 0:w.group_childs.length)>0)?(d(),g("div",Zo,[c(et,{width:"100%",color:"secondary","is-powered":((Q=e(a).activePlayer)==null?void 0:Q.powered)!=!1,disabled:!e(a).activePlayer||!((L=e(a).activePlayer)!=null&&L.available),"model-value":Math.round(((E=e(a).activePlayer)==null?void 0:E.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":r[0]||(r[0]=D=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolume(e(a).activePlayerId,D):e(k).playerCommandVolumeSet(e(a).activePlayerId,D)),"onClick:prepend":r[1]||(r[1]=D=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolumeDown(e(a).activePlayerId):e(k).playerCommandVolumeDown(e(a).activePlayerId)),"onClick:append":r[2]||(r[2]=D=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolumeUp(e(a).activePlayerId):e(k).playerCommandVolumeUp(e(a).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):P("",!0)],64)}}}),es=de(Jo,[["__scopeId","data-v-e7d0fafb"]]),ts=ge({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...St(),...Ae(),...$t(),...Bt(),...Vt(),...He({tag:"footer"}),...at()},"VFooter"),as=_e()({name:"VFooter",props:ts(),setup(t,i){let{slots:s}=i;const o=A(),{themeClasses:n}=nt(t),{backgroundColorClasses:l,backgroundColorStyles:r}=Ge(ie(t,"color")),{borderClasses:y}=wt(t),{elevationClasses:u}=kt(t),{roundedClasses:f}=Ct(t),m=ke(32),{resizeRef:h}=Sl(_=>{_.length&&(m.value=_[0].target.clientHeight)}),p=$(()=>t.height==="auto"?m.value:parseInt(t.height,10));return Ye(()=>t.app,()=>{const _=Mt({id:t.name,order:$(()=>parseInt(t.order,10)),position:$(()=>"bottom"),layoutSize:p,elementSize:$(()=>t.height==="auto"?void 0:p.value),active:$(()=>t.app),absolute:ie(t,"absolute")});gt(()=>{o.value=_.layoutItemStyles.value})}),be(()=>c(t.tag,{ref:h,class:["v-footer",n.value,l.value,y.value,u.value,f.value,t.class],style:[r.value,t.app?o.value:{height:We(t.height)},t.style]},s)),{}}}),ls=Y({__name:"Footer",setup(t){const i=$(()=>a.navigationMenuStyle=="horizontal"),s=$(()=>a.navigationMenuStyle!="horizontal"?0:a.isInStandaloneMode?100:80),o=$(()=>i.value?s.value+5:0);return(n,l)=>(d(),g(G,null,[i.value?(d(),g("div",{key:0,class:Ze(n.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:J(`
      position: fixed;
      width: 100%;
      height: ${s.value+(e(Z)("bp3")?100:70)}px;
      bottom: 0px;
      z-index: 999;
    `)},null,6)):P("",!0),e(a).navigationMenuStyle=="horizontal"?(d(),C(fi,{key:1,height:s.value},null,8,["height"])):P("",!0),c(as,{bottom:"",fixed:"",class:Ze(`d-flex flex-column ${i.value?"mediacontrols-player-float":"mediacontrols-player-default"}`),style:J(`bottom: ${o.value}px;`),elevation:"10",app:""},{default:v(()=>[c(es,{"use-floating-player":i.value},null,8,["use-floating-player"])]),_:1},8,["class","style"])],64))}}),is={class:"player-media-thumb"},os={key:1},ss={key:2,class:"icon-thumb"},ns={style:{"margin-bottom":"3px"}},rs={key:0,style:{"font-size":"0.85rem","font-weight":"500","white-space":"nowrap"}},us={key:0},ds={key:0},cs={key:1},ms={key:2},vs={class:"v-list-item-subtitle",style:{"white-space":"nowrap"}},ps={key:0},ys={key:1},fs={key:2},hs={key:3},_s={key:4},gs={key:5},bs={key:6},ws={class:"player-media-thumb"},ks={class:"icon-thumb"},Ps={class:"v-list-item-subtitle",style:{"white-space":"nowrap"}},Cs=Y({__name:"PlayerCard",props:{player:{},showVolumeControl:{type:Boolean},showMenuButton:{type:Boolean},showSubPlayers:{type:Boolean},showSyncControls:{type:Boolean}},setup(t){const i=t,s=$(()=>{if(i.player!=="web"&&i.player&&i.player.active_source&&i.player.active_source in k.queues)return k.queues[i.player.active_source];if(i.player!=="web"&&i.player&&!i.player.active_source&&i.player.player_id in k.queues)return k.queues[i.player.player_id]}),o=$(()=>{if(s.value&&s.value.active)return s.value.current_item}),n=function(l){console.log("openPlayerMenu"),i.player!="web"&&Me.emit("contextmenu",{items:Da(i.player,s.value),posX:l.clientX,posY:l.clientY})};return(l,r)=>l.player!=="web"?(d(),C(Oe,{key:0,flat:"",class:Ze(["panel-item",{"panel-item-selected":l.player.player_id==e(a).activePlayerId,"panel-item-idle":l.player.state==e(Ve).IDLE,"panel-item-off":l.player.powered==!1}]),ripple:!1,disabled:!l.player.available},{default:v(()=>[c(me,{class:"panel-item-details",flat:"",ripple:!1},{prepend:v(()=>{var y,u,f,m;return[S("div",is,[l.player.powered!=!1&&((y=o.value)!=null&&y.media_item)||(u=o.value)!=null&&u.image?(d(),C(De,{key:0,class:"media-thumb",size:"55",item:((f=o.value)==null?void 0:f.media_item)||o.value,fallback:e(Je)},null,8,["item","fallback"])):l.player.powered!=!1&&!s.value&&((m=l.player.current_media)!=null&&m.image_url)?(d(),g("div",os,[c(je,{class:"media-thumb",size:"55",src:l.player.current_media.image_url},null,8,["src"])])):(d(),g("div",ss,[c(H,{size:"35",icon:l.player.type==e(Se).PLAYER&&l.player.group_childs.length?"mdi-speaker-multiple":l.player.icon,style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))])]}),title:v(()=>[S("div",ns,I(e(dt)(l.player,27)),1)]),subtitle:v(()=>{var y,u,f,m,h,p,_;return[l.player.powered!=!1?(d(),g("div",rs,[(y=o.value)!=null&&y.media_item?(d(),g("div",us,[N(I((u=o.value)==null?void 0:u.media_item.name)+" ",1),"version"in((f=o.value)==null?void 0:f.media_item)&&((m=o.value)!=null&&m.media_item.version)?(d(),g("span",ds,"("+I((h=o.value)==null?void 0:h.media_item.version)+")",1)):P("",!0)])):o.value?(d(),g("div",cs,I((p=o.value)==null?void 0:p.name),1)):!s.value&&((_=l.player.current_media)!=null&&_.title)?(d(),g("div",ms,I(l.player.current_media.title),1)):P("",!0)])):P("",!0)]}),default:v(()=>{var y,u,f,m,h,p,_,w,Q,L,E,D,F,z,W,M,B,q,O;return[S("div",vs,[l.player.powered==!1?(d(),g("div",ps,I(l.$t("off")),1)):(y=o.value)!=null&&y.media_item&&((f=(u=o.value)==null?void 0:u.media_item)==null?void 0:f.media_type)==e(U).TRACK&&"album"in((m=o.value)==null?void 0:m.media_item)&&((h=o.value)!=null&&h.media_item.album)?(d(),g("div",ys,I(e(Pa)((p=o.value)==null?void 0:p.media_item.artists))+" • "+I((_=o.value)==null?void 0:_.media_item.album.name),1)):(w=o.value)!=null&&w.media_item&&"artists"in((Q=o.value)==null?void 0:Q.media_item)&&((L=o.value)==null?void 0:L.media_item.artists.length)>0?(d(),g("div",fs,I((E=o.value)==null?void 0:E.media_item.artists[0].name),1)):(F=(D=o.value)==null?void 0:D.streamdetails)!=null&&F.stream_title?(d(),g("div",hs,I((W=(z=o.value)==null?void 0:z.streamdetails)==null?void 0:W.stream_title),1)):(B=(M=o.value)==null?void 0:M.media_item)!=null&&B.metadata.description?(d(),g("div",_s,I((q=o.value)==null?void 0:q.media_item.metadata.description),1)):!s.value&&l.player.active_source?(d(),g("div",gs,I(l.$t("external_source_active",[e(Qt)(l.player)])),1)):((O=s.value)==null?void 0:O.items)==0?(d(),g("div",bs,I(l.$t("queue_empty")),1)):P("",!0)])]}),append:v(()=>{var y;return[l.player.state==e(Ve).PAUSED||l.player.state==e(Ve).PLAYING||(y=s.value)!=null&&y.items?(d(),C(le,{key:0,variant:"icon",class:"player-command-btn",onClick:r[0]||(r[0]=oe(u=>{e(k).playerCommandPlayPause(l.player.player_id),e(a).activePlayerId=l.player.player_id},["stop"]))},{default:v(()=>[c(H,{size:e(Z)({breakpoint:"phone"})?"30":"32",icon:l.player.state==e(Ve).PLAYING?"mdi-pause":"mdi-play"},null,8,["size","icon"])]),_:1})):P("",!0),l.player.player_id==e(Be).player_id?(d(),C(le,{key:1,variant:"icon",class:"player-command-btn",onClick:r[1]||(r[1]=oe(u=>e(Be).disable(),["stop"]))},{default:v(()=>[c(H,{size:e(Z)({breakpoint:"phone"})?"30":"32"},{default:v(()=>r[4]||(r[4]=[N("mdi-power")])),_:1},8,["size"])]),_:1})):l.player.power_control!=e(ce)?(d(),C(le,{key:2,variant:"icon",class:"player-command-btn",onClick:r[2]||(r[2]=oe(u=>{e(k).playerCommandPowerToggle(l.player.player_id),e(a).activePlayerId=l.player.player_id},["stop"]))},{default:v(()=>[c(H,{size:e(Z)({breakpoint:"phone"})?"30":"32"},{default:v(()=>r[5]||(r[5]=[N("mdi-power")])),_:1},8,["size"])]),_:1})):P("",!0),l.showMenuButton?(d(),C(le,{key:3,variant:"icon",class:"player-command-btn",style:{"margin-right":"-5px"},onClick:oe(n,["stop"])},{default:v(()=>[c(H,{size:e(Z)({breakpoint:"phone"})?"30":"32"},{default:v(()=>r[6]||(r[6]=[N("mdi-dots-vertical")])),_:1},8,["size"])]),_:1})):P("",!0)]}),_:1}),l.showVolumeControl?(d(),C(xa,{key:0,player:l.player,"show-sync-controls":l.showSyncControls,"show-heading-row":!1,"show-sub-players":l.showSubPlayers,"show-volume-control":l.player.powered!=!1,"allow-wheel":!1},null,8,["player","show-sync-controls","show-sub-players","show-volume-control"])):P("",!0)]),_:1},8,["class","disabled"])):(d(),C(Oe,{key:1,flat:"",class:Ze(["panel-item",{"panel-item-off":!0}]),ripple:!1,disabled:!1},{default:v(()=>[c(me,{class:"panel-item-details",flat:"",ripple:!1},{prepend:v(()=>[S("div",ws,[S("div",ks,[c(H,{size:"35",icon:"mdi-speaker",style:{display:"table-cell",opacity:"0.8"}})])])]),title:v(()=>r[7]||(r[7]=[S("div",{style:{"margin-bottom":"3px"}},"Experimental Web Player",-1)])),subtitle:v(()=>r[8]||(r[8]=[])),default:v(()=>[S("div",Ps,[S("div",null,I(l.$t("off")),1)])]),append:v(()=>[c(le,{variant:"icon",class:"player-command-btn",onClick:r[3]||(r[3]=oe(()=>{e(Be).setMode(e(Ia).BUILTIN)},["stop"]))},{default:v(()=>[c(H,{size:e(Z)({breakpoint:"phone"})?"30":"32"},{default:v(()=>r[9]||(r[9]=[N("mdi-power")])),_:1},8,["size"])]),_:1})]),_:1})]),_:1}))}}),it=de(Cs,[["__scopeId","data-v-7f9eaf1c"]]),Is={style:{float:"right","margin-right":"-20px"}},Vs=Y({__name:"PlayerSelect",setup(t){const i=A(!1),s=A(null),o=$(()=>Object.values(k.players).filter(u=>mt(u,!1,!1,!1)).filter(u=>Be.player_id||u.player_id!=Be.player_id).sort((u,f)=>{var m;return u.display_name.toUpperCase()>((m=f.display_name)==null?void 0:m.toUpperCase())?1:-1}));se(()=>a.activePlayerId,u=>{u&&localStorage.setItem("mass.LastPlayerId",u)}),se(()=>k.players,u=>{u&&!a.activePlayer&&r()},{deep:!0}),se(()=>k.state,u=>{u.value!=Tl.CONNECTED&&(a.activePlayerId=void 0)},{deep:!0});function n(u,f=!1){a.activePlayerId==u.player_id?i.value=!i.value:(i.value=!1,a.activePlayerId=u.player_id),f&&(a.showPlayersMenu=!1)}function l(){Be.setMode(Ia.BUILTIN)}Ne(()=>{r()});const r=function(){if(a.activePlayer&&mt(a.activePlayer,!1,!1,!1))return;const u=y();u&&(a.activePlayerId=u.player_id)},y=function(){const u=localStorage.getItem("mass.LastPlayerId");if(u&&u in k.players&&mt(k.players[u],!1,!1,!1))return k.players[u]};return(u,f)=>(d(),g(G,null,[c(Va,{modelValue:e(a).showPlayersMenu,"onUpdate:modelValue":f[0]||(f[0]=m=>e(a).showPlayersMenu=m)},null,8,["modelValue"]),e(a).showPlayersMenu?(d(),C(Ta,{key:0,modelValue:e(a).showPlayersMenu,"onUpdate:modelValue":f[3]||(f[3]=m=>e(a).showPlayersMenu=m),location:"right",app:"",clipped:"",temporary:"",width:460,style:{"z-index":"99999"},"z-index":"99999"},{default:v(()=>[S("div",null,[c(Fe,{class:"title",style:{"padding-top":"20px","padding-bottom":"20px"}},{default:v(()=>[S("b",null,I(u.$t("players")),1),S("div",Is,[c(le,{variant:"icon",to:{name:"playersettings"}},{default:v(()=>[c(H,{size:"30"},{default:v(()=>f[4]||(f[4]=[N("mdi-cog-outline")])),_:1})]),_:1}),c(le,{variant:"icon",onClick:f[1]||(f[1]=m=>e(a).showPlayersMenu=!1)},{default:v(()=>[c(H,{size:"30"},{default:v(()=>f[5]||(f[5]=[N("mdi-window-close")])),_:1})]),_:1})])]),_:1}),c(Ke),c(Ee,{flat:"",style:{margin:"10px 5px 15px 5px"}},{default:v(()=>[(d(!0),g(G,null,re(o.value.filter(m=>{var h;return[e(Ve).PLAYING,e(Ve).PAUSED].includes(m.state)||((h=e(k).queues[m.player_id])==null?void 0:h.items)>0&&m.powered!=!1}),m=>(d(),C(it,{id:m.player_id,key:m.player_id,player:m,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&m.player_id==e(a).activePlayerId,"show-sync-controls":m.supported_features.includes(e($e).SET_MEMBERS),onClick:h=>n(m)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128)),e(Be).player_id?P("",!0):(d(),C(it,{key:0,player:"web",onClick:l}))]),_:1}),c(xl,{modelValue:s.value,"onUpdate:modelValue":f[2]||(f[2]=m=>s.value=m),variant:"accordion",flat:"",class:"expansion"},{default:v(()=>[c(la,{style:{padding:"0"}},{default:v(()=>[c(ia,null,{default:v(()=>[S("h3",null,I(u.$t("all_players")),1)]),_:1}),c(oa,{style:{padding:"0"}},{default:v(()=>[c(Ee,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:v(()=>[(d(!0),g(G,null,re(o.value.filter(m=>m.type!=e(Se).GROUP),m=>(d(),C(it,{id:m.player_id,key:m.player_id,player:m,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&m.player_id==e(a).activePlayerId,"show-sync-controls":m.supported_features.includes(e($e).SET_MEMBERS),onClick:h=>n(m)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1}),o.value.filter(m=>m.type==e(Se).GROUP).length?(d(),C(la,{key:0,style:{padding:"0"}},{default:v(()=>[c(ia,null,{default:v(()=>[S("h3",null,I(u.$t("all_groups")),1)]),_:1}),c(oa,{style:{padding:"0"}},{default:v(()=>[c(Ee,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:v(()=>[(d(!0),g(G,null,re(o.value.filter(m=>m.type==e(Se).GROUP),m=>(d(),C(it,{id:m.player_id,key:m.player_id,player:m,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&m.player_id==e(a).activePlayerId,"show-sync-controls":m.supported_features.includes(e($e).SET_MEMBERS),onClick:h=>n(m)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1})):P("",!0)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])):P("",!0)],64))}}),$s=de(Vs,[["__scopeId","data-v-307da2de"]]);function Ss(t={}){const{immediate:i=!1,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:l,onRegisterError:r}=t;let y,u,f;const m=async(p=!0)=>{await u,f==null||f()};async function h(){if("serviceWorker"in navigator){if(y=await Ql(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:p}},[],import.meta.url).then(({Workbox:p})=>new p("./sw.js",{scope:"./",type:"classic"})).catch(p=>{r==null||r(p)}),!y)return;f=()=>{y==null||y.messageSkipWaiting()};{let p=!1;const _=()=>{p=!0,y==null||y.addEventListener("controlling",w=>{w.isUpdate&&window.location.reload()}),s==null||s()};y.addEventListener("installed",w=>{typeof w.isUpdate>"u"?typeof w.isExternal<"u"&&w.isExternal?_():!p&&(o==null||o()):w.isUpdate||o==null||o()}),y.addEventListener("waiting",_)}y.register({immediate:i}).then(p=>{l?l("./sw.js",p):n==null||n(p)}).catch(p=>{r==null||r(p)})}}return u=h(),m}function Ts(t={}){const{immediate:i=!0,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:l,onRegisterError:r}=t,y=A(!1),u=A(!1);return{updateServiceWorker:Ss({immediate:i,onNeedRefresh(){y.value=!0,s==null||s()},onOfflineReady(){u.value=!0,o==null||o()},onRegistered:n,onRegisteredSW:l,onRegisterError:r}),offlineReady:u,needRefresh:y}}const Qs={key:0,class:"pwa-toast",role:"alert"},Ms={class:"message"},Bs={key:0},Es={key:1},As=Y({__name:"ReloadPrompt",setup(t){const{offlineReady:i,needRefresh:s,updateServiceWorker:o}=Ts(),n=async()=>{i.value=!1,s.value=!1};return(l,r)=>e(i)||e(s)?(d(),g("div",Qs,[S("div",Ms,[e(i)?(d(),g("span",Bs," App ready to work offline ")):(d(),g("span",Es," New content available, click on reload button to update. "))]),e(s)?(d(),g("button",{key:0,onClick:r[0]||(r[0]=y=>e(o)())},"Reload")):P("",!0),S("button",{onClick:n},"Close")])):P("",!0)}}),Ls=ge({...Ae(),...Ll({fullHeight:!0}),...at()},"VApp"),zs=_e()({name:"VApp",props:Ls(),setup(t,i){let{slots:s}=i;const o=nt(t),{layoutClasses:n,getLayoutItem:l,items:r,layoutRef:y}=Al(t),{rtlClasses:u}=bt();return be(()=>{var f;return c("div",{ref:y,class:["v-application",o.themeClasses.value,n.value,u.value,t.class],style:[t.style]},[c("div",{class:"v-application__wrap"},[(f=s.default)==null?void 0:f.call(s)])])}),{getLayoutItem:l,items:r,theme:o}}}),qs=Y({__name:"Default",setup(t){const i=Ml();return se([()=>i.query.player,()=>Object.keys(k.players).length],([s])=>{var l;if(!s)return;const o=s.toString().toLowerCase(),n=(l=Object.values(k.players).find(r=>r.player_id.toLowerCase()===o||r.display_name.toLowerCase()===o))==null?void 0:l.player_id;n&&(a.activePlayerId=n)},{immediate:!0}),se(()=>i.query.showFullscreenPlayer,s=>{a.showFullscreenPlayer=!!s},{immediate:!0}),se(()=>i.query.frameless,s=>{s&&(a.frameless=!0)},{immediate:!0}),(s,o)=>(d(),g(G,null,[e(a).connected?(d(),C(zs,{key:0},{default:v(()=>[e(a).frameless?(d(),C(ra,{key:0})):(d(),g(G,{key:1},[c($s),c(ls),c(ra)],64))]),_:1})):(d(),C(Va,{key:1,class:"centeredoverlay",persistent:"","model-value":!e(a).connected},{default:v(()=>[S("div",null,[c(Ol,{color:"primary",indeterminate:"",size:"64"})])]),_:1},8,["model-value"])),e(a).isInStandaloneMode?(d(),C(As,{key:2})):P("",!0)],64))}}),an=de(qs,[["__scopeId","data-v-33a00054"]]);export{an as default};
