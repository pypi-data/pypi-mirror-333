[tox]
envlist = mypy,pycodestyle,flake8,py313

[testenv]
deps = -rrequirements_test.txt
       -rrequirements.txt
commands = pytest --junitxml=report-{envname}.xml -o junit_suite_name={envname} --cov-report html:cover-{envname} --cov-report term --cov=slims tests
passenv = HYPOTHESIS_PROFILE

[testenv:mypy]
basepython = python3.13
skip_install = true
deps = mypy
commands = mypy --install-types --non-interactive src/slims

[testenv:pycodestyle]
basepython = python3.13
skip_install = true
deps = pycodestyle
commands = pycodestyle --max-line-length=120 --exclude=./venv,./.tox . 

[testenv:flake8]
basepython = python3.13
skip_install = true
deps = flake8
       flake8-pytest-style
commands = flake8 --max-line-length=120 --exclude=./venv,./.tox --extend-ignore=PT .
           flake8 --max-line-length=120 --select=PT tests
