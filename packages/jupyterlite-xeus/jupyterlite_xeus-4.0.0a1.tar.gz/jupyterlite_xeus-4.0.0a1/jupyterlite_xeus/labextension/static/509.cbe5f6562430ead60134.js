"use strict";(self.webpackChunk_jupyterlite_xeus_extension=self.webpackChunk_jupyterlite_xeus_extension||[]).push([[509],{509:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});var t,r=o(874),s=o(390),l=o(97),a=o(240);!function(e){e[e.None=0]="None",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(t||(t={}));const i=[{id:"@jupyterlite/xeus-extension:xeus-kernel-status",autoStart:!0,requires:[r.IToolbarWidgetRegistry,l.IRenderMimeRegistry],activate:async(e,n,o)=>{n&&n.addFactory("Notebook","xeusKernelLogs",(n=>{const l=n.sessionContext;let i,d,g,u,c,v=t.None;const h=()=>{g&&(c=new r.MainAreaWidget({content:g}),c.title.label="Kernel Logs",c.title.icon=s.listIcon,c.id=`${u}-widget`)},k=new s.ToolbarButton({icon:s.listIcon,onClick:()=>{g?(c||h(),c&&(c.isDisposed&&h(),c.isAttached||e.shell.add(c,"main",{mode:"split-bottom"}),e.shell.activateById(c.id))):(0,r.showErrorMessage)("Cannot show logs","Cannot show logs for the current kernel")},tooltip:"Show kernel logs"});return l.kernelChanged.connect((()=>{var e,n,r,s;if(i=null===(e=l.session)||void 0===e?void 0:e.id,d=null===(r=null===(n=l.session)||void 0===n?void 0:n.kernel)||void 0===r?void 0:r.name,v=t.None,!i||!d)return;u=`${d}-${i}`,g=new a.LogConsolePanel(new a.LoggerRegistry({defaultRendermime:o,maxLength:1e3})),g.source=u;const c=new BroadcastChannel(`/kernel-broadcast/${i}`);g.logger&&(g.logger.level="info"),null===(s=g.logger)||void 0===s||s.contentChanged.connect((()=>{const e=document.getElementById(`source:${u}`);if(!e)return;const n=e.lastElementChild;n&&n.scrollIntoView({behavior:"smooth"})})),c.onmessage=e=>{var n,o,r;if(g)switch(e.data.type){case"log":null===(n=g.logger)||void 0===n||n.log({type:"text",level:"info",data:e.data.msg}),v<t.Info&&(v=t.Info,k.addClass("xeus-kernel-status-info"));break;case"warn":null===(o=g.logger)||void 0===o||o.log({type:"text",level:"warning",data:e.data.msg}),v<t.Warning&&(v=t.Warning,k.addClass("xeus-kernel-status-warning"));break;case"error":null===(r=g.logger)||void 0===r||r.log({type:"text",level:"error",data:e.data.msg}),v<t.Error&&(v=t.Error,k.addClass("xeus-kernel-status-error"))}}})),k}))}}]}}]);